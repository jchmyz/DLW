"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var core_1 = require("@blueprintjs/core");
var DateTimePicker = require("react-datetime");
var moment_1 = require("moment");
var Requests_1 = require("./Requests");
var cjs_1 = require("@blueprintjs/core/lib/cjs");
var NumberInput_1 = require("./NumberInput");
var DEUTERIUM = "Deuterium";
var OXYGEN = "Oxygen 18";
var ELEMENTS = [DEUTERIUM, OXYGEN];
var NUM_SAMPLE_TIMES = 5;
var SAMPLE_LABELS = ['Background', 'PD4', 'PD5', 'ED4', 'ED5'];
var AppToaster = core_1.Toaster.create({ className: "app-toaster", position: core_1.Position.TOP_RIGHT });
var DLWApp = /** @class */ (function (_super) {
    __extends(DLWApp, _super);
    function DLWApp(props) {
        var _this = _super.call(this, props) || this;
        _this.submit_inputs = function () { return __awaiter(_this, void 0, void 0, function () {
            var datetimes, results;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        datetimes = this.state.datetimes.map(function (value) {
                            return value.toArray();
                        });
                        return [4 /*yield*/, Requests_1.calculate_from_inputs({
                                d_deltas: this.state.deuterium_deltas,
                                o_deltas: this.state.oxygen_deltas,
                                datetimes: datetimes,
                                dose_weights: this.state.dose_weights,
                                dose_enrichments: this.state.dose_enrichments,
                                subject_weights: this.state.subject_weights,
                                csv_name: this.state.csv_name,
                                subject_id: this.state.subject_id,
                                mixed_dose: this.state.mixed_dose
                            })];
                    case 1:
                        results = _a.sent();
                        if (results.calculations && results.error_flags && results.rco2_ee) {
                            this.setState({
                                results: {
                                    calculations: results.calculations,
                                    rco2_ee: results.rco2_ee,
                                    error_flags: results.error_flags
                                }
                            });
                        }
                        return [2 /*return*/];
                }
            });
        }); };
        _this.handle_csv_upload = function (event) { return __awaiter(_this, void 0, void 0, function () {
            var file, reader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        file = event.target.files[0];
                        if (!(file.type === "text/csv")) return [3 /*break*/, 2];
                        this.setState({ input_csv_name: file.name });
                        reader = new FileReader();
                        reader.onload = this._load_handler;
                        reader.onerror = this._error_handler;
                        return [4 /*yield*/, reader.readAsText(file)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        AppToaster.show({
                            message: "Select a .csv file. For formatting help, press 'Help' in the upper right hand corner",
                            intent: "danger",
                            timeout: 0
                        });
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        }); };
        _this._load_handler = function (event) {
            console.log("into load handler");
            // @ts-ignore
            var csv = event.target.result;
            var all_text_lines = csv.split(/\r\n|\n/);
            var columns = all_text_lines[0].split(',');
            console.log('columns', columns);
            try {
                var data = all_text_lines[1].split(',');
                console.log('data is', data);
                //make this more modular deal with other csv orders
                var d_deltas = data.slice(0, 5);
                var o_deltas = data.slice(5, 10);
                var sample_times = data.slice(10, 15);
                var dose_weights = data.slice(15, 17);
                var dose_enrichments = data.slice(17, 19);
                var subject_weights = data.slice(19, 21);
                var subject_id = data.slice(21, 22);
                for (var i = 0; i < d_deltas.length; i++) {
                    _this.handle_deuterium_delta_change(i, { target: { value: d_deltas[i] } });
                    _this.handle_oxygen_delta_change(i, { target: { value: o_deltas[i] } });
                    _this.handle_date_change(i, moment_1.utc(sample_times[i]));
                }
                for (var i = 0; i < dose_weights.length; i++) {
                    _this.handle_dose_weight_change(i, { target: { value: dose_weights[i] } });
                    _this.handle_dose_enrichment_change(i, { target: { value: dose_enrichments[i] } });
                    _this.handle_subject_weight_change(i, { target: { value: subject_weights[i] } });
                }
                _this.setState({ subject_id: subject_id });
            }
            catch (e) {
                _this._bad_format("");
            }
        };
        _this._bad_format = function (specific_error) {
            _this.setState({ input_csv_name: "" });
            var display_msg = "Incorrect .csv format." + specific_error + " See 'Help' for expected format.";
            AppToaster.show({ message: display_msg, intent: "danger", timeout: 0 });
        };
        _this._error_handler = function (event) {
            // @ts-ignore
            if (event.target.error.name == "NotReadableError") {
                AppToaster.show({
                    message: "File not readable. For formatting help, press 'Help' in the upper right hand corner",
                    intent: "danger",
                    timeout: 0
                });
            }
        };
        _this.check_numerical_inputs = function (input_aray) {
            for (var _i = 0, input_aray_1 = input_aray; _i < input_aray_1.length; _i++) {
                var value = input_aray_1[_i];
                if (isNaN(+value) || value === "") {
                    return false;
                }
            }
            return true;
        };
        _this.handle_deuterium_delta_change = function (index, event) {
            var value = event.target.value;
            if (!isNaN(+value)) {
                var new_deltas = _this.state.deuterium_deltas;
                new_deltas.splice(index, 1, value);
                _this.setState({
                    deuterium_deltas: new_deltas,
                    deuterium_deltas_validated: _this.check_numerical_inputs(new_deltas)
                });
            }
        };
        _this.handle_oxygen_delta_change = function (index, event) {
            var value = event.target.value;
            if (!isNaN(+value)) {
                var new_deltas = _this.state.oxygen_deltas;
                new_deltas.splice(index, 1, value);
                _this.setState({
                    oxygen_deltas: new_deltas,
                    oxygen_deltas_validated: _this.check_numerical_inputs(new_deltas)
                });
            }
        };
        _this.handle_date_change = function (i, value) {
            console.log('into handle date change- got value', value, typeof (value));
            if (typeof value != "string") {
                var all_dates_filled = true;
                var new_date_array = _this.state.datetimes;
                var dates_chronological = _this.state.dates_chronological;
                dates_chronological.splice(i, 1, true);
                for (var j = 0; j < i; j++) {
                    if (typeof (new_date_array[j]) != "string") {
                        if (value.isBefore(new_date_array[j])) {
                            dates_chronological.splice(i, 1, false);
                            all_dates_filled = false;
                            break;
                        }
                    }
                }
                new_date_array.splice(i, 1, value);
                for (var _i = 0, new_date_array_1 = new_date_array; _i < new_date_array_1.length; _i++) {
                    var date = new_date_array_1[_i];
                    if (typeof date === "string") {
                        all_dates_filled = false;
                        break;
                    }
                }
                _this.setState({
                    datetimes: new_date_array,
                    datetimes_validated: all_dates_filled,
                    dates_chronological: dates_chronological
                });
            }
        };
        _this.handle_dose_weight_change = function (index, event) {
            var value = event.target.value;
            if (!isNaN(+value)) {
                var new_dose_weights = _this.state.dose_weights;
                new_dose_weights.splice(index, 1, value);
                _this.setState({
                    dose_weights: new_dose_weights,
                    dose_weights_validated: _this.check_numerical_inputs(new_dose_weights)
                });
            }
        };
        _this.handle_dose_enrichment_change = function (index, event) {
            var value = event.target.value;
            if (!isNaN(+value)) {
                var new_enrichments = _this.state.dose_enrichments;
                new_enrichments.splice(index, 1, value);
                _this.setState({
                    dose_enrichments: new_enrichments,
                    dose_enrichments_validated: _this.check_numerical_inputs(new_enrichments)
                });
            }
        };
        _this.handle_subject_weight_change = function (index, event) {
            var value = event.target.value;
            if (!isNaN(+value)) {
                var new_weights = _this.state.subject_weights;
                new_weights.splice(index, 1, value);
                _this.setState({
                    subject_weights: new_weights,
                    subject_weights_validated: _this.check_numerical_inputs(new_weights)
                });
            }
        };
        _this.state = {
            input_csv_name: "",
            info_overlay_open: false,
            deuterium_deltas: ["", "", "", "", ""],
            oxygen_deltas: ["", "", "", "", ""],
            datetimes: ["", "", "", "", ""],
            dose_weights: ["", ""],
            dose_enrichments: ["", ""],
            mixed_dose: false,
            subject_weights: ["", ""],
            subject_id: "",
            deuterium_deltas_validated: false,
            oxygen_deltas_validated: false,
            datetimes_validated: false,
            dose_weights_validated: false,
            dose_enrichments_validated: false,
            subject_weights_validated: false,
            dates_chronological: [true, true, true, true, true],
            results: { calculations: null, rco2_ee: null, error_flags: null },
            csv_name: "",
        };
        return _this;
    }
    DLWApp.prototype.render = function () {
        var _this = this;
        var all_inputs_validated = (this.state.deuterium_deltas_validated && this.state.oxygen_deltas_validated
            && this.state.datetimes_validated && this.state.dose_weights_validated
            && this.state.dose_enrichments_validated && this.state.subject_weights_validated
            && this.state.subject_id);
        var deuterium_delta_inputs = [];
        var oxygen_delta_inputs = [];
        var collection_time_inputs = [];
        var _loop_1 = function (i) {
            deuterium_delta_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: SAMPLE_LABELS[i] + " Deuterium delta", index: i, key: i, change_function: this_1.handle_deuterium_delta_change, unit: "permil", value: this_1.state.deuterium_deltas[i] }));
            oxygen_delta_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: SAMPLE_LABELS[i] + ' Oxygen 18 delta', index: i, key: i, unit: "permil", change_function: this_1.handle_oxygen_delta_change, value: this_1.state.oxygen_deltas[i] }));
            collection_time_inputs.push(React.createElement(core_1.Popover, { content: React.createElement("p", null, "Collection time inputs must be in chronological order."), className: 'date-warning-popover', isOpen: !this_1.state.dates_chronological[i] },
                React.createElement(DateTimePicker, { onChange: function (value) { return _this.handle_date_change(i, value); }, inputProps: {
                        className: 'date-input-box .bp3-input',
                        placeholder: ' ' + SAMPLE_LABELS[i] + ' sample date and time'
                    }, key: i, value: this_1.state.datetimes[i], dateFormat: "YYYY-MM-DD", timeFormat: "HH:mm" })));
        };
        var this_1 = this;
        for (var i = 0; i < NUM_SAMPLE_TIMES; i++) {
            _loop_1(i);
        }
        var dose_weight_inputs = [];
        var dose_enrichment_inputs = [];
        for (var i = 0; i < ELEMENTS.length; i++) {
            dose_weight_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: ELEMENTS[i] + ' dose weight (g)', index: i, key: i, unit: "g", change_function: this.handle_dose_weight_change, value: this.state.dose_weights[i] }));
            dose_enrichment_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: ELEMENTS[i] + ' dose enrichment (ppm)', index: i, key: i, change_function: this.handle_dose_enrichment_change, value: this.state.dose_enrichments[i], unit: "ppm" }));
        }
        var results_display = React.createElement("div", null);
        if (this.state.results.calculations && this.state.results.rco2_ee && this.state.results.error_flags) {
            var results_calculations = [];
            var results_rco2_ee = [];
            var results_error_flags = [];
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.ndp_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.ndp_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.kd_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.kd_hr[1])));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.nop_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.nop_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.ko_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.ko_hr[1])));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.body_water_avg_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.body_fat_percentage[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.fat_free_mass_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.fat_free_mass_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.fat_mass_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.fat_mass_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.body_fat_percentage[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.body_fat_percentage[1] + "%")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.rco2_mol_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.rco2_mol_day[1] + " mol/day")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.rco2_l_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.rco2_l_hr[1] + " L/hour")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.ee_kcal_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.ee_kcal_day[1] + " kcal/day")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.ee_mj_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.ee_mj_day[1] + " MJ/day")));
            var error_okay = "error-okay";
            var outside_error_bars = "error_not_okay";
            var error_class = ((parseFloat(this.state.results.error_flags.plateau_2h[1]) < 0.05) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.plateau_2h[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.plateau_2h[1])));
            error_class = ((parseFloat(this.state.results.error_flags.plateau_180[1]) < 0.05) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.plateau_180[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.plateau_180[1])));
            error_class = ((parseFloat(this.state.results.error_flags.ds_ratio[1]) < 1.070 &&
                parseFloat(this.state.results.error_flags.ds_ratio[1]) > 1) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ds_ratio[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ds_ratio[1])));
            error_class = ((parseFloat(this.state.results.error_flags.ee[1]) < 10) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ee[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ee[1] + "%")));
            error_class = ((parseFloat(this.state.results.error_flags.ko_kd[1]) < 1.7 &&
                parseFloat(this.state.results.error_flags.ko_kd[1]) > 1.1) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ko_kd[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ko_kd[1])));
            results_display = (React.createElement("div", { className: 'results-display' },
                React.createElement(cjs_1.Card, { className: 'results-card' },
                    React.createElement("h1", null, 'Results for subject ' + this.state.subject_id),
                    React.createElement("div", { className: 'result-sections' },
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-calc' }, "Calculations"),
                            results_calculations),
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-calc' }, "rCO2 and EE, intercept method"),
                            results_rco2_ee),
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-error' }, "Error Flags"),
                            results_error_flags)))));
        }
        return (React.createElement(cjs_1.Navbar, { className: 'dlw-nav' },
            React.createElement(core_1.Dialog, { isOpen: this.state.info_overlay_open, canEscapeKeyClose: true, canOutsideClickClose: false, hasBackdrop: true, isCloseButtonShown: true, onClose: function () {
                    _this.setState({ info_overlay_open: false });
                }, title: 'How to use the Doubly Labeled Water App' },
                React.createElement("p", null, "some helpful text- include CSV formatting")),
            React.createElement(cjs_1.NavbarGroup, { align: core_1.Alignment.LEFT },
                React.createElement(cjs_1.Navbar.Heading, { className: 'dlw-title' }, "Doubly Labeled Water")),
            React.createElement(cjs_1.NavbarGroup, { align: core_1.Alignment.RIGHT },
                React.createElement(cjs_1.NavbarHeading, { className: 'tagline' }, "an open source project"),
                React.createElement("img", { src: "assets/logo_cuhs.png", alt: "University of Colorado Anschutz Medical Campus logo", style: { 'height': 30 } }),
                React.createElement(cjs_1.NavbarDivider, null),
                React.createElement("a", { href: "https://github.com/jchmyz/DoublyLabeledWater", target: "_blank" }, "DoublyLabeledWater on GitHub"),
                React.createElement(cjs_1.NavbarDivider, null),
                React.createElement(core_1.Button, { icon: "help", minimal: true, onClick: function () { return _this.setState({ info_overlay_open: true }); } }, "Help")),
            React.createElement(core_1.FormGroup, { className: 'dlw-app' },
                React.createElement("div", { className: 'load-from-csv' },
                    React.createElement("h5", null, "Load input data from .csv file"),
                    React.createElement(core_1.FileInput, { text: this.state.input_csv_name || "Choose file...", onInputChange: this.handle_csv_upload, disabled: !!(this.state.input_csv_name) })),
                React.createElement("div", { className: 'samples' },
                    React.createElement("div", { className: 'date-inputs' },
                        React.createElement("h5", null, "Collection Dates and Times"),
                        collection_time_inputs),
                    React.createElement("div", { className: 'delta-inputs' },
                        React.createElement("h5", null, "Deuterium Delta Values"),
                        deuterium_delta_inputs),
                    React.createElement("div", { className: 'delta-inputs' },
                        React.createElement("h5", null, "Oxygen 18 Delta Values"),
                        oxygen_delta_inputs)),
                React.createElement("div", { className: 'element-wise-inputs' },
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Dose Weights"),
                        dose_weight_inputs),
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Dose Enrichments"),
                        dose_enrichment_inputs),
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement(core_1.Checkbox, { checked: this.state.mixed_dose, label: "Mixed Dose", onChange: function () {
                                _this.setState({ mixed_dose: !_this.state.mixed_dose });
                            } }))),
                React.createElement("div", { className: 'element-wise-inputs' },
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Subject Weight"),
                        React.createElement(NumberInput_1.NumberInput, { placeholder: "Initial subject weight (kg)", index: 0, change_function: this.handle_subject_weight_change, unit: 'kg', value: this.state.subject_weights[0] }),
                        React.createElement(NumberInput_1.NumberInput, { placeholder: "Final subject weight (kg)", index: 1, change_function: this.handle_subject_weight_change, unit: 'kg', value: this.state.subject_weights[1] })),
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Subject ID"),
                        React.createElement(core_1.InputGroup, { leftIcon: (this.state.subject_id ? "tick" : "circle-arrow-right"), className: '.bp3-fill', onChange: function (event) { return _this.setState({ subject_id: event.target.value }); }, placeholder: 'ID', value: this.state.subject_id }))),
                React.createElement("div", { className: 'submit-group' },
                    React.createElement(core_1.InputGroup, { placeholder: 'Results CSV filename (optional)', className: 'csv-name-input', onChange: function (event) {
                            return _this.setState({ csv_name: event.target.value });
                        } }),
                    React.createElement(core_1.Button, { onClick: this.submit_inputs, disabled: !all_inputs_validated }, "SUBMIT")),
                results_display)));
    };
    return DLWApp;
}(React.Component));
exports.DLWApp = DLWApp;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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MkIsQ0FBQyxLQUFLLEVBQUMsQ0FBQzt3QkFBbkUsQ0FBbUUsR0FBRztvQkFDdEYsb0JBQUMsYUFBTSxJQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxDQUFDLG9CQUFvQixhQUFpQixDQUNuRjtnQkFDTCxlQUFlLENBQ1IsQ0FDUCxDQUNaLENBQUM7SUFDTixDQUFDO0lBeU1MLGFBQUM7QUFBRCxDQXBlQSxBQW9lQyxDQXBlMkIsS0FBSyxDQUFDLFNBQVMsR0FvZTFDO0FBcGVZLHdCQUFNIiwiZmlsZSI6IkRMV0FwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgICBCdXR0b25Hcm91cCwgUG9wb3ZlcixcbiAgICBGb3JtR3JvdXAsXG4gICAgTnVtZXJpY0lucHV0LFxuICAgIEJ1dHRvbiwgVG9hc3RlciwgUG9zaXRpb24sXG4gICAgSW5wdXRHcm91cCwgQWxpZ25tZW50LCBUYWcsIEZpbGVJbnB1dCwgRGlhbG9nLCBDaGVja2JveFxufSBmcm9tIFwiQGJsdWVwcmludGpzL2NvcmVcIjtcbmltcG9ydCAqIGFzIERhdGVUaW1lUGlja2VyIGZyb20gJ3JlYWN0LWRhdGV0aW1lJztcbmltcG9ydCB7TW9tZW50LCB1dGN9IGZyb20gXCJtb21lbnRcIjtcbmltcG9ydCB7Y2FsY3VsYXRlX2Zyb21faW5wdXRzfSBmcm9tIFwiLi9SZXF1ZXN0c1wiO1xuaW1wb3J0IHtGb3JtRXZlbnR9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtDYXJkLCBJY29uLCBOYXZiYXIsIE5hdmJhckRpdmlkZXIsIE5hdmJhckdyb3VwLCBOYXZiYXJIZWFkaW5nfSBmcm9tIFwiQGJsdWVwcmludGpzL2NvcmUvbGliL2Nqc1wiO1xuaW1wb3J0IHtOdW1iZXJJbnB1dH0gZnJvbSBcIi4vTnVtYmVySW5wdXRcIjtcblxuY29uc3QgREVVVEVSSVVNID0gXCJEZXV0ZXJpdW1cIjtcbmNvbnN0IE9YWUdFTiA9IFwiT3h5Z2VuIDE4XCI7XG5jb25zdCBFTEVNRU5UUyA9IFtERVVURVJJVU0sIE9YWUdFTl07XG5cbmNvbnN0IE5VTV9TQU1QTEVfVElNRVMgPSA1O1xuY29uc3QgU0FNUExFX0xBQkVMUyA9IFsnQmFja2dyb3VuZCcsICdQRDQnLCAnUEQ1JywgJ0VENCcsICdFRDUnXTtcblxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3VsdHMge1xuICAgIGNhbGN1bGF0aW9uczoge1xuICAgICAgICBuZHBfa2c6IHN0cmluZ1tdLFxuICAgICAgICBrZF9ocjogc3RyaW5nW10sXG4gICAgICAgIG5vcF9rZzogc3RyaW5nW10sXG4gICAgICAgIGtvX2hyOiBzdHJpbmdbXSxcbiAgICAgICAgYm9keV93YXRlcl9hdmdfa2c6IHN0cmluZ1tdLFxuICAgICAgICBmYXRfZnJlZV9tYXNzX2tnOiBzdHJpbmdbXSxcbiAgICAgICAgZmF0X21hc3Nfa2c6IHN0cmluZ1tdLFxuICAgICAgICBib2R5X2ZhdF9wZXJjZW50YWdlOiBzdHJpbmdbXVxuICAgIH0gfCBudWxsLFxuICAgIHJjbzJfZWU6IHtcbiAgICAgICAgcmNvMl9tb2xfZGF5OiBzdHJpbmdbXSxcbiAgICAgICAgcmNvMl9sX2hyOiBzdHJpbmdbXSxcbiAgICAgICAgZWVfa2NhbF9kYXk6IHN0cmluZ1tdLFxuICAgICAgICBlZV9tal9kYXk6IHN0cmluZ1tdXG4gICAgfSB8IG51bGwsXG4gICAgZXJyb3JfZmxhZ3M6IHtcbiAgICAgICAgcGxhdGVhdV8yaDogc3RyaW5nW10sXG4gICAgICAgIHBsYXRlYXVfMTgwOiBzdHJpbmdbXSxcbiAgICAgICAgZHNfcmF0aW86IHN0cmluZ1tdLFxuICAgICAgICBlZTogc3RyaW5nW10sXG4gICAgICAgIGtvX2tkOiBzdHJpbmdbXVxuICAgIH0gfCBudWxsXG59XG5cbmludGVyZmFjZSBETFdTdGF0ZSB7XG4gICAgaW5wdXRfY3N2X25hbWU6IHN0cmluZztcbiAgICBpbmZvX292ZXJsYXlfb3BlbjogYm9vbGVhbjtcblxuICAgIGRldXRlcml1bV9kZWx0YXM6IHN0cmluZ1tdLFxuICAgIG94eWdlbl9kZWx0YXM6IHN0cmluZ1tdLFxuICAgIGRhdGV0aW1lczogKHN0cmluZyB8IE1vbWVudClbXSxcbiAgICBkb3NlX3dlaWdodHM6IHN0cmluZ1tdLFxuICAgIGRvc2VfZW5yaWNobWVudHM6IHN0cmluZ1tdLFxuICAgIHN1YmplY3Rfd2VpZ2h0czogc3RyaW5nW10sXG4gICAgc3ViamVjdF9pZDogc3RyaW5nO1xuICAgIG1peGVkX2Rvc2U6IGJvb2xlYW47XG5cbiAgICBkZXV0ZXJpdW1fZGVsdGFzX3ZhbGlkYXRlZDogYm9vbGVhbixcbiAgICBveHlnZW5fZGVsdGFzX3ZhbGlkYXRlZDogYm9vbGVhbixcbiAgICBkYXRldGltZXNfdmFsaWRhdGVkOiBib29sZWFuLFxuICAgIGRvc2Vfd2VpZ2h0c192YWxpZGF0ZWQ6IGJvb2xlYW4sXG4gICAgZG9zZV9lbnJpY2htZW50c192YWxpZGF0ZWQ6IGJvb2xlYW4sXG4gICAgc3ViamVjdF93ZWlnaHRzX3ZhbGlkYXRlZDogYm9vbGVhbixcbiAgICBkYXRlc19jaHJvbm9sb2dpY2FsOiBib29sZWFuW11cblxuICAgIHJlc3VsdHM6IFJlc3VsdHNcbiAgICBjc3ZfbmFtZTogc3RyaW5nLFxufVxuXG5jb25zdCBBcHBUb2FzdGVyID0gVG9hc3Rlci5jcmVhdGUoe2NsYXNzTmFtZTogXCJhcHAtdG9hc3RlclwiLCBwb3NpdGlvbjogUG9zaXRpb24uVE9QX1JJR0hUfSk7XG5cbmV4cG9ydCBjbGFzcyBETFdBcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBETFdTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaW5wdXRfY3N2X25hbWU6IFwiXCIsXG4gICAgICAgICAgICBpbmZvX292ZXJsYXlfb3BlbjogZmFsc2UsXG5cbiAgICAgICAgICAgIGRldXRlcml1bV9kZWx0YXM6IFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgICAgIG94eWdlbl9kZWx0YXM6IFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXSxcbiAgICAgICAgICAgIGRhdGV0aW1lczogW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICAgICAgZG9zZV93ZWlnaHRzOiBbXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzOiBbXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICBtaXhlZF9kb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0czogW1wiXCIsIFwiXCJdLFxuICAgICAgICAgICAgc3ViamVjdF9pZDogXCJcIixcblxuICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhc192YWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgb3h5Z2VuX2RlbHRhc192YWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGF0ZXRpbWVzX3ZhbGlkYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBkb3NlX3dlaWdodHNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGRvc2VfZW5yaWNobWVudHNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0c192YWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGF0ZXNfY2hyb25vbG9naWNhbDogW3RydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWVdLFxuXG4gICAgICAgICAgICByZXN1bHRzOiB7Y2FsY3VsYXRpb25zOiBudWxsLCByY28yX2VlOiBudWxsLCBlcnJvcl9mbGFnczogbnVsbH0sXG4gICAgICAgICAgICBjc3ZfbmFtZTogXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBhbGxfaW5wdXRzX3ZhbGlkYXRlZCA9XG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5kZXV0ZXJpdW1fZGVsdGFzX3ZhbGlkYXRlZCAmJiB0aGlzLnN0YXRlLm94eWdlbl9kZWx0YXNfdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zdGF0ZS5kYXRldGltZXNfdmFsaWRhdGVkICYmIHRoaXMuc3RhdGUuZG9zZV93ZWlnaHRzX3ZhbGlkYXRlZFxuICAgICAgICAgICAgICAgICYmIHRoaXMuc3RhdGUuZG9zZV9lbnJpY2htZW50c192YWxpZGF0ZWQgJiYgdGhpcy5zdGF0ZS5zdWJqZWN0X3dlaWdodHNfdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zdGF0ZS5zdWJqZWN0X2lkKTtcblxuICAgICAgICBsZXQgZGV1dGVyaXVtX2RlbHRhX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBsZXQgb3h5Z2VuX2RlbHRhX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBsZXQgY29sbGVjdGlvbl90aW1lX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5VTV9TQU1QTEVfVElNRVM7IGkrKykge1xuICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhX2lucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17U0FNUExFX0xBQkVMU1tpXSArIFwiIERldXRlcml1bSBkZWx0YVwifSBpbmRleD17aX0ga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX2RldXRlcml1bV9kZWx0YV9jaGFuZ2V9IHVuaXQ9e1wicGVybWlsXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRldXRlcml1bV9kZWx0YXNbaV19Lz4pO1xuICAgICAgICAgICAgb3h5Z2VuX2RlbHRhX2lucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17U0FNUExFX0xBQkVMU1tpXSArICcgT3h5Z2VuIDE4IGRlbHRhJ30gaW5kZXg9e2l9IGtleT17aX0gdW5pdD17XCJwZXJtaWxcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlX2Z1bmN0aW9uPXt0aGlzLmhhbmRsZV9veHlnZW5fZGVsdGFfY2hhbmdlfSB2YWx1ZT17dGhpcy5zdGF0ZS5veHlnZW5fZGVsdGFzW2ldfS8+KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25fdGltZV9pbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8UG9wb3ZlciBjb250ZW50PXs8cD5Db2xsZWN0aW9uIHRpbWUgaW5wdXRzIG11c3QgYmUgaW4gY2hyb25vbG9naWNhbCBvcmRlci48L3A+fVxuICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZGF0ZS13YXJuaW5nLXBvcG92ZXInIGlzT3Blbj17IXRoaXMuc3RhdGUuZGF0ZXNfY2hyb25vbG9naWNhbFtpXX0+XG4gICAgICAgICAgICAgICAgICAgIDxEYXRlVGltZVBpY2tlciBvbkNoYW5nZT17KHZhbHVlKSA9PiB0aGlzLmhhbmRsZV9kYXRlX2NoYW5nZShpLCB2YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGF0ZS1pbnB1dC1ib3ggLmJwMy1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcgJyArIFNBTVBMRV9MQUJFTFNbaV0gKyAnIHNhbXBsZSBkYXRlIGFuZCB0aW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aX0gdmFsdWU9e3RoaXMuc3RhdGUuZGF0ZXRpbWVzW2ldfSBkYXRlRm9ybWF0PVwiWVlZWS1NTS1ERFwiIHRpbWVGb3JtYXQ9XCJISDptbVwiLz5cbiAgICAgICAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRvc2Vfd2VpZ2h0X2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBsZXQgZG9zZV9lbnJpY2htZW50X2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEVMRU1FTlRTLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBkb3NlX3dlaWdodF9pbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgcGxhY2Vob2xkZXI9e0VMRU1FTlRTW2ldICsgJyBkb3NlIHdlaWdodCAoZyknfSBpbmRleD17aX0ga2V5PXtpfSB1bml0PXtcImdcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlX2Z1bmN0aW9uPXt0aGlzLmhhbmRsZV9kb3NlX3dlaWdodF9jaGFuZ2V9IHZhbHVlPXt0aGlzLnN0YXRlLmRvc2Vfd2VpZ2h0c1tpXX0vPik7XG4gICAgICAgICAgICBkb3NlX2VucmljaG1lbnRfaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgPE51bWJlcklucHV0IHBsYWNlaG9sZGVyPXtFTEVNRU5UU1tpXSArICcgZG9zZSBlbnJpY2htZW50IChwcG0pJ30gaW5kZXg9e2l9IGtleT17aX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlX2Z1bmN0aW9uPXt0aGlzLmhhbmRsZV9kb3NlX2VucmljaG1lbnRfY2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5kb3NlX2VucmljaG1lbnRzW2ldfSB1bml0PXtcInBwbVwifS8+KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXN1bHRzX2Rpc3BsYXk6IEpTWC5FbGVtZW50ID0gPGRpdi8+O1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucyAmJiB0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZSAmJiB0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MpIHtcbiAgICAgICAgICAgIGxldCByZXN1bHRzX2NhbGN1bGF0aW9uczogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdHNfcmNvMl9lZTogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdHNfZXJyb3JfZmxhZ3M6IEpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgICAgIHJlc3VsdHNfY2FsY3VsYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMubmRwX2tnWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5uZHBfa2dbMV0gKyBcIiBrZ1wifTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgcmVzdWx0c19jYWxjdWxhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5rZF9oclswXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMua2RfaHJbMV19PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLm5vcF9rZ1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMubm9wX2tnWzFdICsgXCIga2dcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfY2FsY3VsYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMua29faHJbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmtvX2hyWzFdfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgcmVzdWx0c19jYWxjdWxhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5ib2R5X3dhdGVyX2F2Z19rZ1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMuYm9keV9mYXRfcGVyY2VudGFnZVsxXSArIFwiIGtnXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmZhdF9mcmVlX21hc3Nfa2dbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmZhdF9mcmVlX21hc3Nfa2dbMV0gKyBcIiBrZ1wifTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgcmVzdWx0c19jYWxjdWxhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5mYXRfbWFzc19rZ1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMuZmF0X21hc3Nfa2dbMV0gKyBcIiBrZ1wifTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgcmVzdWx0c19jYWxjdWxhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5ib2R5X2ZhdF9wZXJjZW50YWdlWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5ib2R5X2ZhdF9wZXJjZW50YWdlWzFdICsgXCIlXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG5cbiAgICAgICAgICAgIHJlc3VsdHNfcmNvMl9lZS5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5yY28yX21vbF9kYXlbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5yY28yX21vbF9kYXlbMV0gKyBcIiBtb2wvZGF5XCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX3JjbzJfZWUucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUucmNvMl9sX2hyWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUucmNvMl9sX2hyWzFdICsgXCIgTC9ob3VyXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX3JjbzJfZWUucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUuZWVfa2NhbF9kYXlbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5lZV9rY2FsX2RheVsxXSArIFwiIGtjYWwvZGF5XCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX3JjbzJfZWUucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUuZWVfbWpfZGF5WzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUuZWVfbWpfZGF5WzFdICsgXCIgTUovZGF5XCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG5cbiAgICAgICAgICAgIGxldCBlcnJvcl9va2F5ID0gXCJlcnJvci1va2F5XCI7XG4gICAgICAgICAgICBsZXQgb3V0c2lkZV9lcnJvcl9iYXJzID0gXCJlcnJvcl9ub3Rfb2theVwiO1xuICAgICAgICAgICAgbGV0IGVycm9yX2NsYXNzID0gKChwYXJzZUZsb2F0KHRoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzJoWzFdKSA8IDAuMDUpID8gZXJyb3Jfb2theSA6IG91dHNpZGVfZXJyb3JfYmFycyk7XG4gICAgICAgICAgICByZXN1bHRzX2Vycm9yX2ZsYWdzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzJoWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9e1wicmVzdWx0LXZhbHVlIFwiICsgZXJyb3JfY2xhc3N9Pnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MucGxhdGVhdV8yaFsxXX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIGVycm9yX2NsYXNzID0gKChwYXJzZUZsb2F0KHRoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzE4MFsxXSkgPCAwLjA1KSA/IGVycm9yX29rYXkgOiBvdXRzaWRlX2Vycm9yX2JhcnMpO1xuICAgICAgICAgICAgcmVzdWx0c19lcnJvcl9mbGFncy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MucGxhdGVhdV8xODBbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17XCJyZXN1bHQtdmFsdWUgXCIgKyBlcnJvcl9jbGFzc30+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzE4MFsxXX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIGVycm9yX2NsYXNzID0gKChwYXJzZUZsb2F0KHRoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5kc19yYXRpb1sxXSkgPCAxLjA3MCAmJlxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmRzX3JhdGlvWzFdKSA+IDEpID8gZXJyb3Jfb2theSA6IG91dHNpZGVfZXJyb3JfYmFycyk7XG4gICAgICAgICAgICByZXN1bHRzX2Vycm9yX2ZsYWdzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5kc19yYXRpb1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtcInJlc3VsdC12YWx1ZSBcIiArIGVycm9yX2NsYXNzfT57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmRzX3JhdGlvWzFdfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgZXJyb3JfY2xhc3MgPSAoKHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmVlWzFdKSA8IDEwKSA/IGVycm9yX29rYXkgOiBvdXRzaWRlX2Vycm9yX2JhcnMpO1xuICAgICAgICAgICAgcmVzdWx0c19lcnJvcl9mbGFncy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MuZWVbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17XCJyZXN1bHQtdmFsdWUgXCIgKyBlcnJvcl9jbGFzc30+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5lZVsxXSArIFwiJVwifTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgZXJyb3JfY2xhc3MgPSAoKHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmtvX2tkWzFdKSA8IDEuNyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmtvX2tkWzFdKSA+IDEuMSkgPyBlcnJvcl9va2F5IDogb3V0c2lkZV9lcnJvcl9iYXJzKTtcbiAgICAgICAgICAgIHJlc3VsdHNfZXJyb3JfZmxhZ3MucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmtvX2tkWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9e1wicmVzdWx0LXZhbHVlIFwiICsgZXJyb3JfY2xhc3N9Pnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3Mua29fa2RbMV19PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2Rpc3BsYXkgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdHMtZGlzcGxheSc+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT0ncmVzdWx0cy1jYXJkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57J1Jlc3VsdHMgZm9yIHN1YmplY3QgJyArIHRoaXMuc3RhdGUuc3ViamVjdF9pZH08L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9ucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1jYWxjJz5DYWxjdWxhdGlvbnM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19jYWxjdWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1jYWxjJz5yQ08yIGFuZCBFRSwgaW50ZXJjZXB0IG1ldGhvZDwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzX3JjbzJfZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1lcnJvcic+RXJyb3IgRmxhZ3M8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19lcnJvcl9mbGFnc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE5hdmJhciBjbGFzc05hbWU9J2Rsdy1uYXYnPlxuICAgICAgICAgICAgICAgIDxEaWFsb2cgaXNPcGVuPXt0aGlzLnN0YXRlLmluZm9fb3ZlcmxheV9vcGVufSBjYW5Fc2NhcGVLZXlDbG9zZT17dHJ1ZX0gY2FuT3V0c2lkZUNsaWNrQ2xvc2U9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQmFja2Ryb3A9e3RydWV9IGlzQ2xvc2VCdXR0b25TaG93bj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpbmZvX292ZXJsYXlfb3BlbjogZmFsc2V9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsnSG93IHRvIHVzZSB0aGUgRG91Ymx5IExhYmVsZWQgV2F0ZXIgQXBwJ30+XG4gICAgICAgICAgICAgICAgICAgIDxwPnNvbWUgaGVscGZ1bCB0ZXh0LSBpbmNsdWRlIENTViBmb3JtYXR0aW5nPC9wPlxuICAgICAgICAgICAgICAgIDwvRGlhbG9nPlxuICAgICAgICAgICAgICAgIDxOYXZiYXJHcm91cCBhbGlnbj17QWxpZ25tZW50LkxFRlR9PlxuICAgICAgICAgICAgICAgICAgICA8TmF2YmFyLkhlYWRpbmcgY2xhc3NOYW1lPSdkbHctdGl0bGUnPkRvdWJseSBMYWJlbGVkIFdhdGVyPC9OYXZiYXIuSGVhZGluZz5cbiAgICAgICAgICAgICAgICA8L05hdmJhckdyb3VwPlxuICAgICAgICAgICAgICAgIDxOYXZiYXJHcm91cCBhbGlnbj17QWxpZ25tZW50LlJJR0hUfT5cbiAgICAgICAgICAgICAgICAgICAgPE5hdmJhckhlYWRpbmcgY2xhc3NOYW1lPSd0YWdsaW5lJz5hbiBvcGVuIHNvdXJjZSBwcm9qZWN0PC9OYXZiYXJIZWFkaW5nPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9sb2dvX2N1aHMucG5nXCIgYWx0PVwiVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBBbnNjaHV0eiBNZWRpY2FsIENhbXB1cyBsb2dvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eydoZWlnaHQnOiAzMH19Lz5cbiAgICAgICAgICAgICAgICAgICAgPE5hdmJhckRpdmlkZXIvPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL2pjaG15ei9Eb3VibHlMYWJlbGVkV2F0ZXJcIiB0YXJnZXQ9XCJfYmxhbmtcIj5Eb3VibHlMYWJlbGVkV2F0ZXIgb25cbiAgICAgICAgICAgICAgICAgICAgICAgIEdpdEh1YjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPE5hdmJhckRpdmlkZXIvPlxuICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIGljb249e1wiaGVscFwifSBtaW5pbWFsPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoe2luZm9fb3ZlcmxheV9vcGVuOiB0cnVlfSl9PkhlbHA8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L05hdmJhckdyb3VwPlxuICAgICAgICAgICAgICAgIDxGb3JtR3JvdXAgY2xhc3NOYW1lPSdkbHctYXBwJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2xvYWQtZnJvbS1jc3YnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkxvYWQgaW5wdXQgZGF0YSBmcm9tIC5jc3YgZmlsZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8RmlsZUlucHV0IHRleHQ9e3RoaXMuc3RhdGUuaW5wdXRfY3N2X25hbWUgfHwgXCJDaG9vc2UgZmlsZS4uLlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbklucHV0Q2hhbmdlPXt0aGlzLmhhbmRsZV9jc3ZfdXBsb2FkfSBkaXNhYmxlZD17ISEodGhpcy5zdGF0ZS5pbnB1dF9jc3ZfbmFtZSl9Lz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzYW1wbGVzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYXRlLWlucHV0cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkNvbGxlY3Rpb24gRGF0ZXMgYW5kIFRpbWVzPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29sbGVjdGlvbl90aW1lX2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RlbHRhLWlucHV0cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkRldXRlcml1bSBEZWx0YSBWYWx1ZXM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkZXV0ZXJpdW1fZGVsdGFfaW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGVsdGEtaW5wdXRzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+T3h5Z2VuIDE4IERlbHRhIFZhbHVlczwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge294eWdlbl9kZWx0YV9pbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlbGVtZW50LXdpc2UtaW5wdXRzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbnB1dHMtYnktZWxlbWVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkRvc2UgV2VpZ2h0czwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rvc2Vfd2VpZ2h0X2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2lucHV0cy1ieS1lbGVtZW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+RG9zZSBFbnJpY2htZW50czwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rvc2VfZW5yaWNobWVudF9pbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbnB1dHMtYnktZWxlbWVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IGNoZWNrZWQ9e3RoaXMuc3RhdGUubWl4ZWRfZG9zZX0gbGFiZWw9XCJNaXhlZCBEb3NlXCIgb25DaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWl4ZWRfZG9zZTogIXRoaXMuc3RhdGUubWl4ZWRfZG9zZX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZWxlbWVudC13aXNlLWlucHV0cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5wdXRzLWJ5LWVsZW1lbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5TdWJqZWN0IFdlaWdodDwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE51bWJlcklucHV0IHBsYWNlaG9sZGVyPXtcIkluaXRpYWwgc3ViamVjdCB3ZWlnaHQgKGtnKVwifSBpbmRleD17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlX2Z1bmN0aW9uPXt0aGlzLmhhbmRsZV9zdWJqZWN0X3dlaWdodF9jaGFuZ2V9IHVuaXQ9eydrZyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnN1YmplY3Rfd2VpZ2h0c1swXX0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17XCJGaW5hbCBzdWJqZWN0IHdlaWdodCAoa2cpXCJ9IGluZGV4PXsxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX3N1YmplY3Rfd2VpZ2h0X2NoYW5nZX0gdW5pdD17J2tnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuc3ViamVjdF93ZWlnaHRzWzFdfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbnB1dHMtYnktZWxlbWVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PlN1YmplY3QgSUQ8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwIGxlZnRJY29uPXsodGhpcy5zdGF0ZS5zdWJqZWN0X2lkID8gXCJ0aWNrXCIgOiBcImNpcmNsZS1hcnJvdy1yaWdodFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eycuYnAzLWZpbGwnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZXZlbnQ6IEZvcm1FdmVudDxIVE1MRWxlbWVudD4pID0+IHRoaXMuc2V0U3RhdGUoe3N1YmplY3RfaWQ6IGV2ZW50LnRhcmdldC52YWx1ZX0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdJRCcgdmFsdWU9e3RoaXMuc3RhdGUuc3ViamVjdF9pZH0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3VibWl0LWdyb3VwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwIHBsYWNlaG9sZGVyPSdSZXN1bHRzIENTViBmaWxlbmFtZSAob3B0aW9uYWwpJyBjbGFzc05hbWU9J2Nzdi1uYW1lLWlucHV0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjc3ZfbmFtZTogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZX0pfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3RoaXMuc3VibWl0X2lucHV0c30gZGlzYWJsZWQ9eyFhbGxfaW5wdXRzX3ZhbGlkYXRlZH0+U1VCTUlUPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19kaXNwbGF5fVxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgPC9OYXZiYXI+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3VibWl0X2lucHV0cyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGRhdGV0aW1lcyA9IHRoaXMuc3RhdGUuZGF0ZXRpbWVzLm1hcCgodmFsdWU6IE1vbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvQXJyYXkoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgY2FsY3VsYXRlX2Zyb21faW5wdXRzKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRfZGVsdGFzOiB0aGlzLnN0YXRlLmRldXRlcml1bV9kZWx0YXMsXG4gICAgICAgICAgICAgICAgb19kZWx0YXM6IHRoaXMuc3RhdGUub3h5Z2VuX2RlbHRhcyxcbiAgICAgICAgICAgICAgICBkYXRldGltZXM6IGRhdGV0aW1lcyxcbiAgICAgICAgICAgICAgICBkb3NlX3dlaWdodHM6IHRoaXMuc3RhdGUuZG9zZV93ZWlnaHRzLFxuICAgICAgICAgICAgICAgIGRvc2VfZW5yaWNobWVudHM6IHRoaXMuc3RhdGUuZG9zZV9lbnJpY2htZW50cyxcbiAgICAgICAgICAgICAgICBzdWJqZWN0X3dlaWdodHM6IHRoaXMuc3RhdGUuc3ViamVjdF93ZWlnaHRzLFxuICAgICAgICAgICAgICAgIGNzdl9uYW1lOiB0aGlzLnN0YXRlLmNzdl9uYW1lLFxuICAgICAgICAgICAgICAgIHN1YmplY3RfaWQ6IHRoaXMuc3RhdGUuc3ViamVjdF9pZCxcbiAgICAgICAgICAgICAgICBtaXhlZF9kb3NlOiB0aGlzLnN0YXRlLm1peGVkX2Rvc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc3VsdHMuY2FsY3VsYXRpb25zICYmIHJlc3VsdHMuZXJyb3JfZmxhZ3MgJiYgcmVzdWx0cy5yY28yX2VlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGlvbnM6IHJlc3VsdHMuY2FsY3VsYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjbzJfZWU6IHJlc3VsdHMucmNvMl9lZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9mbGFnczogcmVzdWx0cy5lcnJvcl9mbGFnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGhhbmRsZV9jc3ZfdXBsb2FkID0gYXN5bmMgKGV2ZW50OiBGb3JtRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBsZXQgZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgaWYgKGZpbGUudHlwZSA9PT0gXCJ0ZXh0L2NzdlwiKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpbnB1dF9jc3ZfbmFtZTogZmlsZS5uYW1lfSk7XG4gICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSB0aGlzLl9sb2FkX2hhbmRsZXI7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHRoaXMuX2Vycm9yX2hhbmRsZXI7XG4gICAgICAgICAgICBhd2FpdCByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2VsZWN0IGEgLmNzdiBmaWxlLiBGb3IgZm9ybWF0dGluZyBoZWxwLCBwcmVzcyAnSGVscCcgaW4gdGhlIHVwcGVyIHJpZ2h0IGhhbmQgY29ybmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudDogXCJkYW5nZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgX2xvYWRfaGFuZGxlciA9IChldmVudDogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcImludG8gbG9hZCBoYW5kbGVyXCIpO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGxldCBjc3YgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICBsZXQgYWxsX3RleHRfbGluZXMgPSBjc3Yuc3BsaXQoL1xcclxcbnxcXG4vKTtcbiAgICAgICAgbGV0IGNvbHVtbnMgPSBhbGxfdGV4dF9saW5lc1swXS5zcGxpdCgnLCcpO1xuICAgICAgICBjb25zb2xlLmxvZygnY29sdW1ucycsIGNvbHVtbnMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGRhdGEgPSBhbGxfdGV4dF9saW5lc1sxXS5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEgaXMnLCBkYXRhKTtcbiAgICAgICAgICAgIC8vbWFrZSB0aGlzIG1vcmUgbW9kdWxhciBkZWFsIHdpdGggb3RoZXIgY3N2IG9yZGVyc1xuICAgICAgICAgICAgbGV0IGRfZGVsdGFzID0gZGF0YS5zbGljZSgwLCA1KTtcbiAgICAgICAgICAgIGxldCBvX2RlbHRhcyA9IGRhdGEuc2xpY2UoNSwgMTApO1xuICAgICAgICAgICAgbGV0IHNhbXBsZV90aW1lcyA9IGRhdGEuc2xpY2UoMTAsIDE1KTtcbiAgICAgICAgICAgIGxldCBkb3NlX3dlaWdodHMgPSBkYXRhLnNsaWNlKDE1LCAxNyk7XG4gICAgICAgICAgICBsZXQgZG9zZV9lbnJpY2htZW50cyA9IGRhdGEuc2xpY2UoMTcsIDE5KTtcbiAgICAgICAgICAgIGxldCBzdWJqZWN0X3dlaWdodHMgPSBkYXRhLnNsaWNlKDE5LCAyMSk7XG4gICAgICAgICAgICBsZXQgc3ViamVjdF9pZCA9IGRhdGEuc2xpY2UoMjEsIDIyKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZF9kZWx0YXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9kZXV0ZXJpdW1fZGVsdGFfY2hhbmdlKGksIHt0YXJnZXQ6IHt2YWx1ZTogZF9kZWx0YXNbaV19fSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfb3h5Z2VuX2RlbHRhX2NoYW5nZShpLCB7dGFyZ2V0OiB7dmFsdWU6IG9fZGVsdGFzW2ldfX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlX2RhdGVfY2hhbmdlKGksIHV0YyhzYW1wbGVfdGltZXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9zZV93ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZG9zZV93ZWlnaHRfY2hhbmdlKGksIHt0YXJnZXQ6IHt2YWx1ZTogZG9zZV93ZWlnaHRzW2ldfX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlX2Rvc2VfZW5yaWNobWVudF9jaGFuZ2UoaSwge3RhcmdldDoge3ZhbHVlOiBkb3NlX2VucmljaG1lbnRzW2ldfX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlX3N1YmplY3Rfd2VpZ2h0X2NoYW5nZShpLCB7dGFyZ2V0OiB7dmFsdWU6IHN1YmplY3Rfd2VpZ2h0c1tpXX19KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3N1YmplY3RfaWQ6IHN1YmplY3RfaWR9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fYmFkX2Zvcm1hdChcIlwiKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfYmFkX2Zvcm1hdCA9IChzcGVjaWZpY19lcnJvcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lucHV0X2Nzdl9uYW1lOiBcIlwifSk7XG4gICAgICAgIGxldCBkaXNwbGF5X21zZyA9IFwiSW5jb3JyZWN0IC5jc3YgZm9ybWF0LlwiICsgc3BlY2lmaWNfZXJyb3IgKyBcIiBTZWUgJ0hlbHAnIGZvciBleHBlY3RlZCBmb3JtYXQuXCI7XG4gICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7bWVzc2FnZTogZGlzcGxheV9tc2csIGludGVudDogXCJkYW5nZXJcIiwgdGltZW91dDogMH0pO1xuICAgIH07XG5cbiAgICBfZXJyb3JfaGFuZGxlciA9IChldmVudDogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQuZXJyb3IubmFtZSA9PSBcIk5vdFJlYWRhYmxlRXJyb3JcIikge1xuICAgICAgICAgICAgQXBwVG9hc3Rlci5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlIG5vdCByZWFkYWJsZS4gRm9yIGZvcm1hdHRpbmcgaGVscCwgcHJlc3MgJ0hlbHAnIGluIHRoZSB1cHBlciByaWdodCBoYW5kIGNvcm5lclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlbnQ6IFwiZGFuZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja19udW1lcmljYWxfaW5wdXRzID0gKGlucHV0X2FyYXk6IChzdHJpbmcgfCBudW1iZXIpW10pID0+IHtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgaW5wdXRfYXJheSkge1xuICAgICAgICAgICAgaWYgKGlzTmFOKCt2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIGhhbmRsZV9kZXV0ZXJpdW1fZGVsdGFfY2hhbmdlID0gKGluZGV4OiBudW1iZXIsIGV2ZW50OiBGb3JtRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IChldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG4gICAgICAgIGlmICghaXNOYU4oK3ZhbHVlKSkge1xuICAgICAgICAgICAgbGV0IG5ld19kZWx0YXMgPSB0aGlzLnN0YXRlLmRldXRlcml1bV9kZWx0YXM7XG4gICAgICAgICAgICBuZXdfZGVsdGFzLnNwbGljZShpbmRleCwgMSwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXV0ZXJpdW1fZGVsdGFzOiBuZXdfZGVsdGFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhc192YWxpZGF0ZWQ6IHRoaXMuY2hlY2tfbnVtZXJpY2FsX2lucHV0cyhuZXdfZGVsdGFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBoYW5kbGVfb3h5Z2VuX2RlbHRhX2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCBldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBuZXdfZGVsdGFzID0gdGhpcy5zdGF0ZS5veHlnZW5fZGVsdGFzO1xuICAgICAgICAgICAgbmV3X2RlbHRhcy5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3h5Z2VuX2RlbHRhczogbmV3X2RlbHRhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG94eWdlbl9kZWx0YXNfdmFsaWRhdGVkOiB0aGlzLmNoZWNrX251bWVyaWNhbF9pbnB1dHMobmV3X2RlbHRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX2RhdGVfY2hhbmdlID0gKGk6IG51bWJlciwgdmFsdWU6IHN0cmluZyB8IE1vbWVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnaW50byBoYW5kbGUgZGF0ZSBjaGFuZ2UtIGdvdCB2YWx1ZScsIHZhbHVlLCB0eXBlb2YodmFsdWUpKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQgYWxsX2RhdGVzX2ZpbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBsZXQgbmV3X2RhdGVfYXJyYXkgPSB0aGlzLnN0YXRlLmRhdGV0aW1lcztcbiAgICAgICAgICAgIGxldCBkYXRlc19jaHJvbm9sb2dpY2FsID0gdGhpcy5zdGF0ZS5kYXRlc19jaHJvbm9sb2dpY2FsO1xuICAgICAgICAgICAgZGF0ZXNfY2hyb25vbG9naWNhbC5zcGxpY2UoaSwgMSwgdHJ1ZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGk7IGorKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YobmV3X2RhdGVfYXJyYXlbal0pICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlzQmVmb3JlKG5ld19kYXRlX2FycmF5W2pdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXNfY2hyb25vbG9naWNhbC5zcGxpY2UoaSwgMSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsX2RhdGVzX2ZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdfZGF0ZV9hcnJheS5zcGxpY2UoaSwgMSwgdmFsdWUpO1xuICAgICAgICAgICAgZm9yIChsZXQgZGF0ZSBvZiBuZXdfZGF0ZV9hcnJheSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICBhbGxfZGF0ZXNfZmlsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZXRpbWVzOiBuZXdfZGF0ZV9hcnJheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGV0aW1lc192YWxpZGF0ZWQ6IGFsbF9kYXRlc19maWxsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlc19jaHJvbm9sb2dpY2FsOiBkYXRlc19jaHJvbm9sb2dpY2FsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX2Rvc2Vfd2VpZ2h0X2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCBldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBuZXdfZG9zZV93ZWlnaHRzID0gdGhpcy5zdGF0ZS5kb3NlX3dlaWdodHM7XG4gICAgICAgICAgICBuZXdfZG9zZV93ZWlnaHRzLnNwbGljZShpbmRleCwgMSwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX3dlaWdodHM6IG5ld19kb3NlX3dlaWdodHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX3dlaWdodHNfdmFsaWRhdGVkOiB0aGlzLmNoZWNrX251bWVyaWNhbF9pbnB1dHMobmV3X2Rvc2Vfd2VpZ2h0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX2Rvc2VfZW5yaWNobWVudF9jaGFuZ2UgPSAoaW5kZXg6IG51bWJlciwgZXZlbnQ6IEZvcm1FdmVudDxIVE1MRWxlbWVudD4pID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgaWYgKCFpc05hTigrdmFsdWUpKSB7XG4gICAgICAgICAgICBsZXQgbmV3X2VucmljaG1lbnRzID0gdGhpcy5zdGF0ZS5kb3NlX2VucmljaG1lbnRzO1xuICAgICAgICAgICAgbmV3X2VucmljaG1lbnRzLnNwbGljZShpbmRleCwgMSwgdmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzOiBuZXdfZW5yaWNobWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzX3ZhbGlkYXRlZDogdGhpcy5jaGVja19udW1lcmljYWxfaW5wdXRzKG5ld19lbnJpY2htZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX3N1YmplY3Rfd2VpZ2h0X2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCBldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkpIHtcbiAgICAgICAgICAgIGxldCBuZXdfd2VpZ2h0cyA9IHRoaXMuc3RhdGUuc3ViamVjdF93ZWlnaHRzO1xuICAgICAgICAgICAgbmV3X3dlaWdodHMuc3BsaWNlKGluZGV4LCAxLCB2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0czogbmV3X3dlaWdodHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0X3dlaWdodHNfdmFsaWRhdGVkOiB0aGlzLmNoZWNrX251bWVyaWNhbF9pbnB1dHMobmV3X3dlaWdodHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxufVxuIl19
