"use strict";
var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var core_1 = require("@blueprintjs/core");
var DateTimePicker = require("react-datetime");
var moment = require("moment");
var Requests_1 = require("./Requests");
var cjs_1 = require("@blueprintjs/core/lib/cjs");
var recharts_1 = require("recharts");
var NumberInput_1 = require("./NumberInput");
var utilities_1 = require("./utilities");
var DEUTERIUM = "Deuterium";
var OXYGEN = "Oxygen 18";
var ELEMENTS = [DEUTERIUM, OXYGEN];
var NUM_SAMPLE_TIMES = 5;
var SAMPLE_LABELS = ['Background', 'PD4', 'PD5', 'ED4', 'ED5'];
var DeltaUnits;
(function (DeltaUnits) {
    DeltaUnits["permil"] = "permil";
    DeltaUnits["ppm"] = "ppm";
})(DeltaUnits || (DeltaUnits = {}));
var AppToaster = core_1.Toaster.create({ className: "app-toaster", position: core_1.Position.TOP_RIGHT });
var DLWApp = /** @class */ (function (_super) {
    __extends(DLWApp, _super);
    function DLWApp(props) {
        var _this = _super.call(this, props) || this;
        _this.export = function () { return __awaiter(_this, void 0, void 0, function () {
            var results;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Requests_1.export_to_csv(this.state.new_csv_name)];
                    case 1:
                        results = _a.sent();
                        if (results.error) {
                            AppToaster.show({
                                message: "Error exporting results to csv. Please file a bug report at https://github.com/jchmyz/DoublyLabeledWater/issues",
                                intent: "danger",
                                timeout: 0
                            });
                        }
                        else {
                            AppToaster.show({
                                message: "Results successfully exported to " + results.saved_file,
                                intent: "success",
                                timeout: 3000
                            });
                        }
                        return [2 /*return*/];
                }
            });
        }); };
        _this.submit_inputs = function () { return __awaiter(_this, void 0, void 0, function () {
            var datetimes, results;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        datetimes = this.state.datetimes.map(function (value) {
                            return value.toArray();
                        });
                        // months are zero-indexed in Moment.js
                        datetimes.map(function (value) {
                            return value.splice(1, 1, value[1] + 1);
                        });
                        return [4 /*yield*/, Requests_1.calculate_from_inputs({
                                d_meas: this.state.deuterium_deltas,
                                o18_meas: this.state.oxygen_deltas,
                                datetimes: datetimes,
                                dose_weights: this.state.dose_weights,
                                dose_enrichments: this.state.dose_enrichments,
                                subject_weights: this.state.subject_weights,
                                subject_id: this.state.subject_id,
                                mixed_dose: this.state.mixed_dose,
                                in_permil: (this.state.delta_units === DeltaUnits.permil)
                            })];
                    case 1:
                        results = _a.sent();
                        if (results.calculations && results.error_flags && results.rco2_ee) {
                            this.setState({
                                results: {
                                    calculations: results.calculations,
                                    rco2_ee: results.rco2_ee,
                                    error_flags: results.error_flags
                                }
                            });
                            AppToaster.show({
                                message: "Results calculated successfully", intent: "success", timeout: 3000
                            });
                            if (this.scroll_anchor_ref.current)
                                this.scroll_anchor_ref.current.scrollIntoView({ behavior: "smooth" });
                        }
                        return [2 /*return*/];
                }
            });
        }); };
        _this.clear = function () {
            _this.setState({
                input_csv_name: "",
                deuterium_deltas: ["", "", "", "", ""],
                oxygen_deltas: ["", "", "", "", ""],
                datetimes: [_this.now, _this.now, _this.now, _this.now, _this.now],
                dose_weights: ["", ""],
                dose_enrichments: ["", ""],
                subject_weights: ["", ""],
                subject_id: "",
                deuterium_deltas_validated: false,
                oxygen_deltas_validated: false,
                datetimes_validated: false,
                dose_weights_validated: false,
                dose_enrichments_validated: false,
                subject_weights_validated: false,
                results: { calculations: null, rco2_ee: null, error_flags: null },
            });
        };
        _this.handle_csv_upload = function (event) { return __awaiter(_this, void 0, void 0, function () {
            var file, reader;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        file = event.target.files[0];
                        if (!(file.type === "text/csv")) return [3 /*break*/, 2];
                        this.setState({ input_csv_name: file.name });
                        reader = new FileReader();
                        reader.onload = this._load_handler;
                        reader.onerror = this._error_handler;
                        return [4 /*yield*/, reader.readAsText(file)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        AppToaster.show({
                            message: "Select a .csv file. For formatting help, press 'Help' in the upper right hand corner",
                            intent: "danger",
                            timeout: 0
                        });
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        }); };
        _this.handle_csv_append_choice = function (event) {
            var file = event.target.files[0];
            if (file.type === "text/csv") {
                _this.setState({ append_csv_name: file.name });
            }
            else {
                AppToaster.show({
                    message: "Select an existing .csv file.",
                    intent: "danger",
                    timeout: 0
                });
            }
        };
        _this._load_handler = function (event) {
            console.log("into load handler");
            // @ts-ignore
            var csv = event.target.result;
            var all_text_lines = csv.split(/\r\n|\n/);
            var columns = all_text_lines[0].split(',');
            console.log('columns', columns);
            try {
                var data = all_text_lines[1].split(',');
                console.log('data is', data);
                //TODO: make this deal with other csv orders
                var d_deltas = data.slice(0, 5);
                var o_deltas = data.slice(5, 10);
                var sample_times = data.slice(10, 15);
                var dose_weights = data.slice(15, 17);
                var dose_enrichments = data.slice(17, 19);
                var subject_weights = data.slice(19, 21);
                var subject_id = data.slice(21, 22);
                for (var i = 0; i < d_deltas.length; i++) {
                    _this.handle_deuterium_delta_change(i, d_deltas[i]);
                    _this.handle_oxygen_delta_change(i, o_deltas[i]);
                    _this.handle_date_change(i, moment.utc(sample_times[i]));
                }
                for (var i = 0; i < dose_weights.length; i++) {
                    _this.handle_dose_weight_change(i, dose_weights[i]);
                    _this.handle_dose_enrichment_change(i, dose_enrichments[i]);
                    _this.handle_subject_weight_change(i, subject_weights[i]);
                }
                _this.setState({ subject_id: subject_id });
            }
            catch (e) {
                _this._bad_format("");
            }
        };
        _this._bad_format = function (specific_error) {
            _this.setState({ input_csv_name: "" });
            var display_msg = "Incorrect .csv format." + specific_error + " See 'Help' for expected format.";
            AppToaster.show({ message: display_msg, intent: "danger", timeout: 0 });
        };
        _this._error_handler = function (event) {
            // @ts-ignore
            if (event.target.error.name == "NotReadableError") {
                AppToaster.show({
                    message: "File not readable. For formatting help, press 'Help' in the upper right hand corner",
                    intent: "danger",
                    timeout: 0
                });
            }
        };
        _this.check_numerical_inputs = function (input_aray) {
            for (var _i = 0, input_aray_1 = input_aray; _i < input_aray_1.length; _i++) {
                var value = input_aray_1[_i];
                if (isNaN(+value) || value === "") {
                    return false;
                }
            }
            return true;
        };
        _this._flag_non_numerical_input = function () {
            AppToaster.show({ message: "Enter a numeric value", intent: "danger", timeout: 3000 });
        };
        _this._flag_non_date_input = function () {
            AppToaster.show({ message: "Enter a valid date", intent: "danger", timeout: 3000 });
        };
        _this.handle_deuterium_delta_change = function (index, event) {
            var value = (typeof event === "string") ? event : event.target.value;
            var values_sep_by_spaces = value.split(" ");
            values_sep_by_spaces = values_sep_by_spaces.filter(function (value) { return value !== ""; });
            if (values_sep_by_spaces.length === 1 || value === "") {
                if (!isNaN(+value) || value === "") {
                    var new_deltas = _this.state.deuterium_deltas;
                    new_deltas.splice(index, 1, value);
                    _this.setState({
                        deuterium_deltas: new_deltas,
                        deuterium_deltas_validated: _this.check_numerical_inputs(new_deltas)
                    });
                }
                else
                    _this._flag_non_numerical_input();
            }
            else {
                for (var i = 0; i < values_sep_by_spaces.length; i++) {
                    _this.handle_deuterium_delta_change(index + i, values_sep_by_spaces[i]);
                }
            }
        };
        _this.handle_oxygen_delta_change = function (index, event) {
            var value = (typeof event === "string") ? event : event.target.value;
            var values_sep_by_spaces = value.split(" ");
            values_sep_by_spaces = values_sep_by_spaces.filter(function (value) { return value !== ""; });
            if (values_sep_by_spaces.length === 1 || value === "") {
                if (!isNaN(+value) || (value === "")) {
                    var new_deltas = _this.state.oxygen_deltas;
                    new_deltas.splice(index, 1, value);
                    _this.setState({
                        oxygen_deltas: new_deltas,
                        oxygen_deltas_validated: _this.check_numerical_inputs(new_deltas)
                    });
                }
                else
                    _this._flag_non_numerical_input();
            }
            else {
                for (var i = 0; i < values_sep_by_spaces.length; i++) {
                    _this.handle_oxygen_delta_change(index + i, values_sep_by_spaces[i]);
                }
            }
        };
        _this.handle_date_change = function (index, value) {
            var new_date_array = _this.state.datetimes;
            if (typeof value != "string") {
                var all_dates_filled = true;
                for (var j = 0; j < index; j++) {
                    if ((new_date_array[j] != _this.now) && value.isBefore(new_date_array[j])) {
                        AppToaster.show({
                            message: "Collection dates must be in chronological order.",
                            intent: "danger",
                            timeout: 0
                        });
                        return;
                    }
                    else if (value.isSame(new_date_array[j])) {
                        AppToaster.show({
                            message: "Duplicate collection dates entered", intent: "danger", timeout: 0
                        });
                        return;
                    }
                }
                new_date_array.splice(index, 1, value);
                for (var _i = 0, new_date_array_1 = new_date_array; _i < new_date_array_1.length; _i++) {
                    var date = new_date_array_1[_i];
                    if (date === _this.now) {
                        all_dates_filled = false;
                        break;
                    }
                }
                _this.setState({
                    datetimes: new_date_array,
                    datetimes_validated: all_dates_filled,
                });
            }
            else {
                var split_values = value.split(" ");
                if (value === "") {
                    new_date_array.splice(index, 1, _this.now);
                    _this.setState({ datetimes: new_date_array, datetimes_validated: false });
                }
                else {
                    var i = 0;
                    var skipped_indices = 0; // track indices to place dates in correct boxes
                    while (i < split_values.length) {
                        // deal with spaces between date and time
                        if (moment.parseZone(new Date(split_values[i])).isValid()) {
                            if (i < split_values.length - 1) {
                                if (moment.parseZone(new Date(split_values[i + 1])).isValid()) {
                                    //both valid dates- don't need to worry about spaces, treat them as separate dates
                                    var as_moment = utilities_1.default(split_values[i]);
                                    if (typeof as_moment !== "boolean") {
                                        _this.handle_date_change(index + i, as_moment);
                                    }
                                    i++;
                                }
                                else { // next value isn't a valid date- likely a time. tack it onto the date
                                    var as_moment = utilities_1.default(split_values[i].concat(" ", split_values[i + 1]));
                                    if (typeof as_moment !== "boolean") {
                                        _this.handle_date_change(index + i - skipped_indices, as_moment);
                                    }
                                    skipped_indices++;
                                    i += 2;
                                }
                            }
                            else {
                                var as_moment = utilities_1.default(split_values[i]);
                                if (typeof as_moment !== "boolean") {
                                    _this.handle_date_change(index + i, as_moment);
                                }
                                i++;
                            }
                        }
                        else {
                            _this._flag_non_date_input();
                            i++;
                        }
                    }
                }
            }
        };
        _this.handle_dose_weight_change = function (index, event) {
            if (_this.state.mixed_dose) {
                // if mixed, set both values to this
                _this.handle_dose_weight_change(1, event);
            }
            var value = (typeof event == "string") ? event : event.target.value;
            var values_sep_by_spaces = value.split(" ");
            values_sep_by_spaces = values_sep_by_spaces.filter(function (value) { return value !== ""; });
            if (values_sep_by_spaces.length === 1 || value === "") {
                if (!isNaN(+value) || value === "") {
                    var new_dose_weights = _this.state.dose_weights;
                    new_dose_weights.splice(index, 1, value);
                    _this.setState({
                        dose_weights: new_dose_weights,
                        dose_weights_validated: _this.check_numerical_inputs(new_dose_weights)
                    });
                }
                else
                    _this._flag_non_numerical_input();
            }
            else {
                for (var i = 0; i < values_sep_by_spaces.length; i++) {
                    _this.handle_dose_weight_change(index + i, values_sep_by_spaces[i]);
                }
            }
        };
        _this.handle_dose_enrichment_change = function (index, event) {
            var value = (typeof event == "string") ? event : event.target.value;
            var values_sep_by_spaces = value.split(" ");
            values_sep_by_spaces = values_sep_by_spaces.filter(function (value) { return value !== ""; });
            if (values_sep_by_spaces.length === 1 || value === "") {
                if (!isNaN(+value) || value === "") {
                    var new_enrichments = _this.state.dose_enrichments;
                    new_enrichments.splice(index, 1, value);
                    _this.setState({
                        dose_enrichments: new_enrichments,
                        dose_enrichments_validated: _this.check_numerical_inputs(new_enrichments)
                    });
                }
                else
                    _this._flag_non_numerical_input();
            }
            else {
                for (var i = 0; i < values_sep_by_spaces.length; i++) {
                    _this.handle_dose_enrichment_change(index + i, values_sep_by_spaces[i]);
                }
            }
        };
        _this.handle_subject_weight_change = function (index, event) {
            var value = (typeof event == "string") ? event : event.target.value;
            var values_sep_by_spaces = value.split(" ");
            values_sep_by_spaces = values_sep_by_spaces.filter(function (value) { return value !== ""; });
            if (values_sep_by_spaces.length === 1 || value === "") {
                if (!isNaN(+value) || value === "") {
                    var new_weights = _this.state.subject_weights;
                    new_weights.splice(index, 1, value);
                    _this.setState({
                        subject_weights: new_weights,
                        subject_weights_validated: _this.check_numerical_inputs(new_weights)
                    });
                }
                else
                    _this._flag_non_numerical_input();
            }
            else {
                for (var i = 0; i < values_sep_by_spaces.length; i++) {
                    _this.handle_subject_weight_change(index + i, values_sep_by_spaces[i]);
                }
            }
        };
        _this.now = moment();
        _this.scroll_anchor_ref = React.createRef();
        _this.state = {
            input_csv_name: "",
            info_overlay_open: false,
            delta_units: DeltaUnits.permil,
            deuterium_deltas: ["", "", "", "", ""],
            oxygen_deltas: ["", "", "", "", ""],
            datetimes: [_this.now, _this.now, _this.now, _this.now, _this.now],
            dose_weights: ["", ""],
            dose_enrichments: ["", ""],
            mixed_dose: false,
            subject_weights: ["", ""],
            subject_id: "",
            deuterium_deltas_validated: false,
            oxygen_deltas_validated: false,
            datetimes_validated: false,
            dose_weights_validated: false,
            dose_enrichments_validated: false,
            subject_weights_validated: false,
            results: { calculations: null, rco2_ee: null, error_flags: null },
            new_csv_name: "", append_csv_name: ""
        };
        return _this;
    }
    DLWApp.prototype.render = function () {
        var _this = this;
        var all_inputs_validated = (this.state.deuterium_deltas_validated && this.state.oxygen_deltas_validated
            && this.state.datetimes_validated && this.state.dose_weights_validated
            && this.state.dose_enrichments_validated && this.state.subject_weights_validated
            && this.state.subject_id);
        var deuterium_delta_inputs = [];
        var oxygen_delta_inputs = [];
        var collection_time_inputs = [];
        var _loop_1 = function (i) {
            deuterium_delta_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: SAMPLE_LABELS[i] + " Deuterium delta", index: i, key: i, change_function: this_1.handle_deuterium_delta_change, unit: this_1.state.delta_units, value: this_1.state.deuterium_deltas[i] }));
            oxygen_delta_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: SAMPLE_LABELS[i] + ' Oxygen 18 delta', index: i, key: i, unit: this_1.state.delta_units, change_function: this_1.handle_oxygen_delta_change, value: this_1.state.oxygen_deltas[i] }));
            collection_time_inputs.push(React.createElement(DateTimePicker, { onChange: function (value) { return _this.handle_date_change(i, value); }, inputProps: {
                    className: 'date-input-box .bp3-input',
                    placeholder: ' ' + SAMPLE_LABELS[i] + ' sample date and time',
                    value: (this_1.state.datetimes[i] === this_1.now) ? "" : this_1.state.datetimes[i].format('YYYY-MM-DD HH:mm')
                }, key: i, value: this_1.state.datetimes[i], dateFormat: "YYYY-MM-DD", timeFormat: "HH:mm" }));
        };
        var this_1 = this;
        for (var i = 0; i < NUM_SAMPLE_TIMES; i++) {
            _loop_1(i);
        }
        var dose_weight_inputs = [];
        var dose_enrichment_inputs = [];
        for (var i = 0; i < ELEMENTS.length; i++) {
            if (!this.state.mixed_dose) {
                dose_weight_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: ELEMENTS[i] + ' dose weight (g)', index: i, key: i, unit: "g", change_function: this.handle_dose_weight_change, value: this.state.dose_weights[i] }));
            }
            dose_enrichment_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: ELEMENTS[i] + ' dose enrichment (ppm)', index: i, key: i, change_function: this.handle_dose_enrichment_change, value: this.state.dose_enrichments[i], unit: "ppm" }));
        }
        if (this.state.mixed_dose) {
            dose_weight_inputs.push(React.createElement(NumberInput_1.NumberInput, { placeholder: "Dose weight (g)", index: 0, value: this.state.dose_weights[0], unit: "g", change_function: this.handle_dose_weight_change }));
        }
        var results_display = React.createElement("div", null);
        if (this.state.results.calculations && this.state.results.rco2_ee && this.state.results.error_flags) {
            var results_calculations = [];
            var results_rco2_ee = [];
            var results_error_flags = [];
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.ndp_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.ndp_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.kd_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.kd_hr[1])));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.nop_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.nop_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.ko_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.ko_hr[1])));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.body_water_avg_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.body_water_avg_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.fat_free_mass_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.fat_free_mass_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.fat_mass_kg[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.fat_mass_kg[1] + " kg")));
            results_calculations.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.calculations.body_fat_percentage[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.calculations.body_fat_percentage[1] + "%")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.rco2_mol_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.rco2_mol_day[1] + " mol/day")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.rco2_l_hr[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.rco2_l_hr[1] + " L/hour")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.ee_kcal_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.ee_kcal_day[1] + " kcal/day")));
            results_rco2_ee.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.rco2_ee.ee_mj_day[0] + ":"),
                React.createElement("p", { className: "result-value" }, this.state.results.rco2_ee.ee_mj_day[1] + " MJ/day")));
            var error_okay = "error-okay";
            var outside_error_bars = "error_not_okay";
            var error_class = ((parseFloat(this.state.results.error_flags.plateau_2h[1]) < 0.05) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.plateau_2h[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.plateau_2h[1])));
            error_class = ((parseFloat(this.state.results.error_flags.plateau_180[1]) < 0.05) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.plateau_180[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.plateau_180[1])));
            error_class = ((parseFloat(this.state.results.error_flags.ds_ratio[1]) < 1.070 &&
                parseFloat(this.state.results.error_flags.ds_ratio[1]) > 1) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ds_ratio[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ds_ratio[1])));
            error_class = ((parseFloat(this.state.results.error_flags.ee[1]) < 10) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ee[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ee[1] + "%")));
            error_class = ((parseFloat(this.state.results.error_flags.ko_kd[1]) < 1.7 &&
                parseFloat(this.state.results.error_flags.ko_kd[1]) > 1.1) ? error_okay : outside_error_bars);
            results_error_flags.push(React.createElement("div", { className: 'result-pair' },
                React.createElement("p", { className: "result-label" }, this.state.results.error_flags.ko_kd[0] + ":"),
                React.createElement("p", { className: "result-value " + error_class }, this.state.results.error_flags.ko_kd[1])));
            var chart_data_d_meas = [];
            var chart_data_o18_meas = [];
            for (var i = 0; i < this.state.deuterium_deltas.length; i++) {
                chart_data_d_meas.push({ x: i, y: this.state.deuterium_deltas[i] });
                chart_data_o18_meas.push({ x: i, y: this.state.oxygen_deltas[i] });
            }
            console.log('data is', chart_data_d_meas, chart_data_o18_meas);
            var deltas_chart = (React.createElement(recharts_1.ScatterChart, { height: 300, width: 600, margin: { top: 20, right: 40, bottom: 20, left: 40 } },
                React.createElement(recharts_1.CartesianGrid, null),
                React.createElement(recharts_1.XAxis, { type: "number", dataKey: "x", name: "Time of Collection", label: "Time of Collection", domain: [-0.5, 4.5], ticks: SAMPLE_LABELS }),
                React.createElement(recharts_1.YAxis, { yAxisId: "left", type: "number", dataKey: "y", name: "Measured 2H", label: "Measured 2H", domain: [-200, 900], unit: this.state.delta_units, ticks: [-200, 0, 200, 400, 600, 800] }),
                React.createElement(recharts_1.YAxis, { yAxisId: "right", type: "number", dataKey: "y", name: "Measured O18", label: "Measured O18", domain: [-200, 900], unit: this.state.delta_units, orientation: "right", ticks: [-200, 0, 200, 400, 600, 800] }),
                React.createElement(recharts_1.Tooltip, { cursor: { strokeDasharray: '3 3' } }),
                React.createElement(recharts_1.Scatter, { yAxisId: "left", name: "Measured 2H", data: chart_data_d_meas, fill: "#8884d8" }),
                React.createElement(recharts_1.Scatter, { yAxisId: "right", name: "Measured O18", data: chart_data_o18_meas, fill: "#82ca9d" })));
            results_display = (React.createElement("div", { className: 'results-display', ref: this.scroll_anchor_ref },
                React.createElement(cjs_1.Card, { className: 'results-card' },
                    React.createElement("h1", null, 'Results for subject ' + this.state.subject_id),
                    React.createElement("div", { className: 'result-sections' },
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-calc' }, "Calculations"),
                            results_calculations),
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-calc' }, "rCO2 and EE, intercept method"),
                            results_rco2_ee),
                        React.createElement("div", { className: 'result-section' },
                            React.createElement("h5", { className: 'result-header-error' }, "Error Flags"),
                            results_error_flags))),
                React.createElement(cjs_1.Card, { className: 'results-card' },
                    React.createElement("div", { className: 'result-sections' },
                        React.createElement("div", { className: 'result-section' }, deltas_chart)))));
        }
        return (React.createElement(cjs_1.Navbar, { className: 'dlw-nav' },
            React.createElement(core_1.Dialog, { isOpen: this.state.info_overlay_open, canEscapeKeyClose: true, canOutsideClickClose: false, hasBackdrop: true, isCloseButtonShown: true, onClose: function () {
                    _this.setState({ info_overlay_open: false });
                }, title: 'How to use the Doubly Labeled Water App' },
                React.createElement("p", null, "some helpful text- include CSV formatting")),
            React.createElement(cjs_1.NavbarGroup, { align: core_1.Alignment.LEFT },
                React.createElement(cjs_1.Navbar.Heading, { className: 'dlw-title' }, "Doubly Labeled Water")),
            React.createElement(cjs_1.NavbarGroup, { align: core_1.Alignment.RIGHT },
                React.createElement(cjs_1.NavbarHeading, { className: 'tagline' }, "an open source project"),
                React.createElement("img", { src: "assets/logo_cuhs.png", alt: "University of Colorado Anschutz Medical Campus logo", style: { 'height': 30 } }),
                React.createElement(cjs_1.NavbarDivider, null),
                React.createElement("a", { href: "https://github.com/jchmyz/DoublyLabeledWater", target: "_blank" }, "DoublyLabeledWater on GitHub"),
                React.createElement(cjs_1.NavbarDivider, null),
                React.createElement(core_1.Button, { icon: "help", minimal: true, onClick: function () { return _this.setState({ info_overlay_open: true }); } }, "Help")),
            React.createElement(core_1.FormGroup, { className: 'dlw-app' },
                React.createElement("div", { className: 'subject-clear' },
                    React.createElement("div", null,
                        React.createElement("h5", null, "Subject ID"),
                        React.createElement(core_1.InputGroup, { leftIcon: (this.state.subject_id ? "tick" : "circle-arrow-right"), className: '.bp3-fill subject-id', onChange: function (event) { return _this.setState({ subject_id: event.target.value }); }, placeholder: 'ID', value: this.state.subject_id })),
                    React.createElement("div", null,
                        React.createElement(core_1.Button, { className: 'clear-button', onClick: this.clear }, "CLEAR INPUTS"))),
                React.createElement("div", { className: 'load-from-csv' },
                    React.createElement("h5", null, "Load input data from .csv file"),
                    React.createElement(core_1.FileInput, { text: this.state.input_csv_name || "Choose file...", onInputChange: this.handle_csv_upload, disabled: !!(this.state.input_csv_name) })),
                React.createElement("div", { className: 'samples' },
                    React.createElement("div", { className: 'date-inputs' },
                        React.createElement("h5", null, "Collection Dates and Times"),
                        collection_time_inputs),
                    React.createElement("div", { className: 'delta-inputs' },
                        React.createElement("h5", null, "Deuterium Delta Values"),
                        deuterium_delta_inputs),
                    React.createElement("div", { className: 'delta-inputs' },
                        React.createElement("h5", null, "Oxygen 18 Delta Values"),
                        oxygen_delta_inputs),
                    React.createElement("div", { className: 'delta-unit-radio' },
                        React.createElement(core_1.RadioGroup, { onChange: function (event) {
                                _this.setState({ delta_units: event.target.value });
                            }, selectedValue: this.state.delta_units },
                            React.createElement(core_1.Radio, { label: "permil", value: DeltaUnits.permil, large: true }),
                            React.createElement(core_1.Radio, { label: "ppm", value: DeltaUnits.ppm, large: true })))),
                React.createElement("div", { className: 'element-wise-inputs' },
                    React.createElement("div", { className: 'mixed-dose-box' },
                        React.createElement(core_1.Checkbox, { checked: this.state.mixed_dose, labelElement: React.createElement("h5", null, "Mixed Dose"), large: true, onChange: function () {
                                _this.setState({ mixed_dose: !_this.state.mixed_dose });
                            }, alignIndicator: core_1.Alignment.RIGHT }))),
                React.createElement("div", { className: 'element-wise-inputs' },
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Dose Weights"),
                        dose_weight_inputs),
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Dose Enrichments"),
                        dose_enrichment_inputs)),
                React.createElement("div", { className: 'element-wise-inputs' },
                    React.createElement("div", { className: 'inputs-by-element' },
                        React.createElement("h5", null, "Subject Weight"),
                        React.createElement(NumberInput_1.NumberInput, { placeholder: "Initial subject weight (kg)", index: 0, change_function: this.handle_subject_weight_change, unit: 'kg', value: this.state.subject_weights[0] }),
                        React.createElement(NumberInput_1.NumberInput, { placeholder: "Final subject weight (kg)", index: 1, change_function: this.handle_subject_weight_change, unit: 'kg', value: this.state.subject_weights[1] })),
                    React.createElement(core_1.Button, { className: 'calculate-button', onClick: this.submit_inputs, disabled: !all_inputs_validated }, "CALCULATE RESULTS")),
                React.createElement("div", { className: 'submit-group' },
                    React.createElement("div", { className: 'csv-input-new' },
                        React.createElement("h5", null, "Input a name for a new .csv file"),
                        React.createElement(core_1.InputGroup, { placeholder: 'CSV filename', className: 'csv_input', onChange: function (event) {
                                return _this.setState({ new_csv_name: event.target.value });
                            } })),
                    React.createElement("div", { className: 'csv-append' },
                        React.createElement("h5", null, "Or, select an existing .csv file to append results to"),
                        React.createElement(core_1.FileInput, { text: this.state.append_csv_name || "Choose file...", onInputChange: this.handle_csv_append_choice, className: 'csv-input' })),
                    React.createElement(core_1.Button, { onClick: this.export, disabled: !(this.state.results.calculations && (this.state.new_csv_name || this.state.append_csv_name)), className: 'export-button' }, "EXPORT TO CSV")),
                results_display)));
    };
    return DLWApp;
}(React.Component));
exports.DLWApp = DLWApp;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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O2dCQUNMLGVBQWUsQ0FDUixDQUNQLENBQ1osQ0FBQztJQUNOLENBQUM7SUFrV0wsYUFBQztBQUFELENBL3JCQSxBQStyQkMsQ0EvckIyQixLQUFLLENBQUMsU0FBUyxHQStyQjFDO0FBL3JCWSx3QkFBTSIsImZpbGUiOiJETFdBcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7XG4gICAgQnV0dG9uR3JvdXAsIFBvcG92ZXIsXG4gICAgRm9ybUdyb3VwLFxuICAgIE51bWVyaWNJbnB1dCxcbiAgICBCdXR0b24sIFRvYXN0ZXIsIFBvc2l0aW9uLFxuICAgIElucHV0R3JvdXAsIEFsaWdubWVudCwgVGFnLCBGaWxlSW5wdXQsIERpYWxvZywgQ2hlY2tib3gsIFJhZGlvLCBSYWRpb0dyb3VwXG59IGZyb20gXCJAYmx1ZXByaW50anMvY29yZVwiO1xuaW1wb3J0ICogYXMgRGF0ZVRpbWVQaWNrZXIgZnJvbSAncmVhY3QtZGF0ZXRpbWUnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQge2NhbGN1bGF0ZV9mcm9tX2lucHV0cywgZXhwb3J0X3RvX2Nzdn0gZnJvbSBcIi4vUmVxdWVzdHNcIjtcbmltcG9ydCB7Rm9ybUV2ZW50LCBSZWZPYmplY3R9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtDYXJkLCBJY29uLCBOYXZiYXIsIE5hdmJhckRpdmlkZXIsIE5hdmJhckdyb3VwLCBOYXZiYXJIZWFkaW5nfSBmcm9tIFwiQGJsdWVwcmludGpzL2NvcmUvbGliL2Nqc1wiO1xuaW1wb3J0IHtTY2F0dGVyQ2hhcnQsIENhcnRlc2lhbkdyaWQsIFNjYXR0ZXIsIFlBeGlzLCBYQXhpcywgVG9vbHRpcH0gZnJvbSAncmVjaGFydHMnO1xuaW1wb3J0IHtOdW1iZXJJbnB1dH0gZnJvbSBcIi4vTnVtYmVySW5wdXRcIjtcbmltcG9ydCBjb252ZXJ0X3N0cmluZ190b19tb21lbnQgZnJvbSBcIi4vdXRpbGl0aWVzXCI7XG5cbmNvbnN0IERFVVRFUklVTSA9IFwiRGV1dGVyaXVtXCI7XG5jb25zdCBPWFlHRU4gPSBcIk94eWdlbiAxOFwiO1xuY29uc3QgRUxFTUVOVFMgPSBbREVVVEVSSVVNLCBPWFlHRU5dO1xuXG5jb25zdCBOVU1fU0FNUExFX1RJTUVTID0gNTtcbmNvbnN0IFNBTVBMRV9MQUJFTFMgPSBbJ0JhY2tncm91bmQnLCAnUEQ0JywgJ1BENScsICdFRDQnLCAnRUQ1J107XG5cblxuZXhwb3J0IGludGVyZmFjZSBSZXN1bHRzIHtcbiAgICBjYWxjdWxhdGlvbnM6IHtcbiAgICAgICAgbmRwX2tnOiBzdHJpbmdbXSxcbiAgICAgICAga2RfaHI6IHN0cmluZ1tdLFxuICAgICAgICBub3Bfa2c6IHN0cmluZ1tdLFxuICAgICAgICBrb19ocjogc3RyaW5nW10sXG4gICAgICAgIGJvZHlfd2F0ZXJfYXZnX2tnOiBzdHJpbmdbXSxcbiAgICAgICAgZmF0X2ZyZWVfbWFzc19rZzogc3RyaW5nW10sXG4gICAgICAgIGZhdF9tYXNzX2tnOiBzdHJpbmdbXSxcbiAgICAgICAgYm9keV9mYXRfcGVyY2VudGFnZTogc3RyaW5nW11cbiAgICB9IHwgbnVsbCxcbiAgICByY28yX2VlOiB7XG4gICAgICAgIHJjbzJfbW9sX2RheTogc3RyaW5nW10sXG4gICAgICAgIHJjbzJfbF9ocjogc3RyaW5nW10sXG4gICAgICAgIGVlX2tjYWxfZGF5OiBzdHJpbmdbXSxcbiAgICAgICAgZWVfbWpfZGF5OiBzdHJpbmdbXVxuICAgIH0gfCBudWxsLFxuICAgIGVycm9yX2ZsYWdzOiB7XG4gICAgICAgIHBsYXRlYXVfMmg6IHN0cmluZ1tdLFxuICAgICAgICBwbGF0ZWF1XzE4MDogc3RyaW5nW10sXG4gICAgICAgIGRzX3JhdGlvOiBzdHJpbmdbXSxcbiAgICAgICAgZWU6IHN0cmluZ1tdLFxuICAgICAgICBrb19rZDogc3RyaW5nW11cbiAgICB9IHwgbnVsbFxufVxuXG5lbnVtIERlbHRhVW5pdHMge1xuICAgIHBlcm1pbCA9IFwicGVybWlsXCIsXG4gICAgcHBtID0gXCJwcG1cIlxufVxuXG5pbnRlcmZhY2UgRExXU3RhdGUge1xuICAgIGlucHV0X2Nzdl9uYW1lOiBzdHJpbmc7XG4gICAgaW5mb19vdmVybGF5X29wZW46IGJvb2xlYW47XG5cbiAgICBkZWx0YV91bml0czogRGVsdGFVbml0cztcbiAgICBkZXV0ZXJpdW1fZGVsdGFzOiBzdHJpbmdbXSxcbiAgICBveHlnZW5fZGVsdGFzOiBzdHJpbmdbXSxcbiAgICBkYXRldGltZXM6IG1vbWVudC5Nb21lbnRbXSxcbiAgICBkb3NlX3dlaWdodHM6IHN0cmluZ1tdLFxuICAgIGRvc2VfZW5yaWNobWVudHM6IHN0cmluZ1tdLFxuICAgIHN1YmplY3Rfd2VpZ2h0czogc3RyaW5nW10sXG4gICAgc3ViamVjdF9pZDogc3RyaW5nO1xuICAgIG1peGVkX2Rvc2U6IGJvb2xlYW47XG5cbiAgICBkZXV0ZXJpdW1fZGVsdGFzX3ZhbGlkYXRlZDogYm9vbGVhbixcbiAgICBveHlnZW5fZGVsdGFzX3ZhbGlkYXRlZDogYm9vbGVhbixcbiAgICBkYXRldGltZXNfdmFsaWRhdGVkOiBib29sZWFuLFxuICAgIGRvc2Vfd2VpZ2h0c192YWxpZGF0ZWQ6IGJvb2xlYW4sXG4gICAgZG9zZV9lbnJpY2htZW50c192YWxpZGF0ZWQ6IGJvb2xlYW4sXG4gICAgc3ViamVjdF93ZWlnaHRzX3ZhbGlkYXRlZDogYm9vbGVhbixcblxuICAgIHJlc3VsdHM6IFJlc3VsdHNcbiAgICBuZXdfY3N2X25hbWU6IHN0cmluZyxcbiAgICBhcHBlbmRfY3N2X25hbWU6IHN0cmluZ1xufVxuXG5jb25zdCBBcHBUb2FzdGVyID0gVG9hc3Rlci5jcmVhdGUoe2NsYXNzTmFtZTogXCJhcHAtdG9hc3RlclwiLCBwb3NpdGlvbjogUG9zaXRpb24uVE9QX1JJR0hUfSk7XG5cbmV4cG9ydCBjbGFzcyBETFdBcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBETFdTdGF0ZT4ge1xuICAgIG5vdzogbW9tZW50Lk1vbWVudDtcbiAgICBzY3JvbGxfYW5jaG9yX3JlZjogUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLm5vdyA9IG1vbWVudCgpO1xuICAgICAgICB0aGlzLnNjcm9sbF9hbmNob3JfcmVmID0gUmVhY3QuY3JlYXRlUmVmKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpbnB1dF9jc3ZfbmFtZTogXCJcIixcbiAgICAgICAgICAgIGluZm9fb3ZlcmxheV9vcGVuOiBmYWxzZSxcblxuICAgICAgICAgICAgZGVsdGFfdW5pdHM6IERlbHRhVW5pdHMucGVybWlsLFxuICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhczogW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICAgICAgb3h5Z2VuX2RlbHRhczogW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICAgICAgZGF0ZXRpbWVzOiBbdGhpcy5ub3csIHRoaXMubm93LCB0aGlzLm5vdywgdGhpcy5ub3csIHRoaXMubm93XSxcbiAgICAgICAgICAgIGRvc2Vfd2VpZ2h0czogW1wiXCIsIFwiXCJdLFxuICAgICAgICAgICAgZG9zZV9lbnJpY2htZW50czogW1wiXCIsIFwiXCJdLFxuICAgICAgICAgICAgbWl4ZWRfZG9zZTogZmFsc2UsXG4gICAgICAgICAgICBzdWJqZWN0X3dlaWdodHM6IFtcIlwiLCBcIlwiXSxcbiAgICAgICAgICAgIHN1YmplY3RfaWQ6IFwiXCIsXG5cbiAgICAgICAgICAgIGRldXRlcml1bV9kZWx0YXNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIG94eWdlbl9kZWx0YXNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGRhdGV0aW1lc192YWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZG9zZV93ZWlnaHRzX3ZhbGlkYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzX3ZhbGlkYXRlZDogZmFsc2UsXG4gICAgICAgICAgICBzdWJqZWN0X3dlaWdodHNfdmFsaWRhdGVkOiBmYWxzZSxcblxuICAgICAgICAgICAgcmVzdWx0czoge2NhbGN1bGF0aW9uczogbnVsbCwgcmNvMl9lZTogbnVsbCwgZXJyb3JfZmxhZ3M6IG51bGx9LFxuICAgICAgICAgICAgbmV3X2Nzdl9uYW1lOiBcIlwiLCBhcHBlbmRfY3N2X25hbWU6IFwiXCJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBhbGxfaW5wdXRzX3ZhbGlkYXRlZCA9XG4gICAgICAgICAgICAodGhpcy5zdGF0ZS5kZXV0ZXJpdW1fZGVsdGFzX3ZhbGlkYXRlZCAmJiB0aGlzLnN0YXRlLm94eWdlbl9kZWx0YXNfdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zdGF0ZS5kYXRldGltZXNfdmFsaWRhdGVkICYmIHRoaXMuc3RhdGUuZG9zZV93ZWlnaHRzX3ZhbGlkYXRlZFxuICAgICAgICAgICAgICAgICYmIHRoaXMuc3RhdGUuZG9zZV9lbnJpY2htZW50c192YWxpZGF0ZWQgJiYgdGhpcy5zdGF0ZS5zdWJqZWN0X3dlaWdodHNfdmFsaWRhdGVkXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5zdGF0ZS5zdWJqZWN0X2lkKTtcblxuICAgICAgICBsZXQgZGV1dGVyaXVtX2RlbHRhX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBsZXQgb3h5Z2VuX2RlbHRhX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBsZXQgY29sbGVjdGlvbl90aW1lX2lucHV0czogSlNYLkVsZW1lbnRbXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5VTV9TQU1QTEVfVElNRVM7IGkrKykge1xuICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhX2lucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17U0FNUExFX0xBQkVMU1tpXSArIFwiIERldXRlcml1bSBkZWx0YVwifSBpbmRleD17aX0ga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX2RldXRlcml1bV9kZWx0YV9jaGFuZ2V9IHVuaXQ9e3RoaXMuc3RhdGUuZGVsdGFfdW5pdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRldXRlcml1bV9kZWx0YXNbaV19Lz4pO1xuICAgICAgICAgICAgb3h5Z2VuX2RlbHRhX2lucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17U0FNUExFX0xBQkVMU1tpXSArICcgT3h5Z2VuIDE4IGRlbHRhJ30gaW5kZXg9e2l9IGtleT17aX0gdW5pdD17dGhpcy5zdGF0ZS5kZWx0YV91bml0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlX2Z1bmN0aW9uPXt0aGlzLmhhbmRsZV9veHlnZW5fZGVsdGFfY2hhbmdlfSB2YWx1ZT17dGhpcy5zdGF0ZS5veHlnZW5fZGVsdGFzW2ldfS8+KTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25fdGltZV9pbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8RGF0ZVRpbWVQaWNrZXIgb25DaGFuZ2U9eyh2YWx1ZSkgPT4gdGhpcy5oYW5kbGVfZGF0ZV9jaGFuZ2UoaSwgdmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFByb3BzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdkYXRlLWlucHV0LWJveCAuYnAzLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnICcgKyBTQU1QTEVfTEFCRUxTW2ldICsgJyBzYW1wbGUgZGF0ZSBhbmQgdGltZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogKHRoaXMuc3RhdGUuZGF0ZXRpbWVzW2ldID09PSB0aGlzLm5vdykgPyBcIlwiIDogdGhpcy5zdGF0ZS5kYXRldGltZXNbaV0uZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpfSB2YWx1ZT17dGhpcy5zdGF0ZS5kYXRldGltZXNbaV19IGRhdGVGb3JtYXQ9XCJZWVlZLU1NLUREXCIgdGltZUZvcm1hdD1cIkhIOm1tXCIvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkb3NlX3dlaWdodF9pbnB1dHM6IEpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgbGV0IGRvc2VfZW5yaWNobWVudF9pbnB1dHM6IEpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBFTEVNRU5UUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXRlLm1peGVkX2Rvc2UpIHtcbiAgICAgICAgICAgICAgICBkb3NlX3dlaWdodF9pbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPE51bWJlcklucHV0IHBsYWNlaG9sZGVyPXtFTEVNRU5UU1tpXSArICcgZG9zZSB3ZWlnaHQgKGcpJ30gaW5kZXg9e2l9IGtleT17aX0gdW5pdD17XCJnXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX2Rvc2Vfd2VpZ2h0X2NoYW5nZX0gdmFsdWU9e3RoaXMuc3RhdGUuZG9zZV93ZWlnaHRzW2ldfS8+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvc2VfZW5yaWNobWVudF9pbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgcGxhY2Vob2xkZXI9e0VMRU1FTlRTW2ldICsgJyBkb3NlIGVucmljaG1lbnQgKHBwbSknfSBpbmRleD17aX0ga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX2Rvc2VfZW5yaWNobWVudF9jaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRvc2VfZW5yaWNobWVudHNbaV19IHVuaXQ9e1wicHBtXCJ9Lz4pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1peGVkX2Rvc2UpIHtcbiAgICAgICAgICAgIGRvc2Vfd2VpZ2h0X2lucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxOdW1iZXJJbnB1dCBwbGFjZWhvbGRlcj17XCJEb3NlIHdlaWdodCAoZylcIn0gaW5kZXg9ezB9IHZhbHVlPXt0aGlzLnN0YXRlLmRvc2Vfd2VpZ2h0c1swXX0gdW5pdD17XCJnXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZV9mdW5jdGlvbj17dGhpcy5oYW5kbGVfZG9zZV93ZWlnaHRfY2hhbmdlfS8+KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0c19kaXNwbGF5OiBKU1guRWxlbWVudCA9IDxkaXYvPjtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMgJiYgdGhpcy5zdGF0ZS5yZXN1bHRzLnJjbzJfZWUgJiYgdGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0c19jYWxjdWxhdGlvbnM6IEpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRzX3JjbzJfZWU6IEpTWC5FbGVtZW50W10gPSBbXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRzX2Vycm9yX2ZsYWdzOiBKU1guRWxlbWVudFtdID0gW107XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLm5kcF9rZ1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMubmRwX2tnWzFdICsgXCIga2dcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfY2FsY3VsYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMua2RfaHJbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmtkX2hyWzFdfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgcmVzdWx0c19jYWxjdWxhdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5ub3Bfa2dbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLm5vcF9rZ1sxXSArIFwiIGtnXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmtvX2hyWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5rb19oclsxXX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfY2FsY3VsYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMuYm9keV93YXRlcl9hdmdfa2dbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmJvZHlfd2F0ZXJfYXZnX2tnWzFdICsgXCIga2dcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfY2FsY3VsYXRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMuZmF0X2ZyZWVfbWFzc19rZ1swXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5jYWxjdWxhdGlvbnMuZmF0X2ZyZWVfbWFzc19rZ1sxXSArIFwiIGtnXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmZhdF9tYXNzX2tnWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtdmFsdWVcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucy5mYXRfbWFzc19rZ1sxXSArIFwiIGtnXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICByZXN1bHRzX2NhbGN1bGF0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmJvZHlfZmF0X3BlcmNlbnRhZ2VbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuY2FsY3VsYXRpb25zLmJvZHlfZmF0X3BlcmNlbnRhZ2VbMV0gKyBcIiVcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcblxuICAgICAgICAgICAgcmVzdWx0c19yY28yX2VlLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5yY28yX2VlLnJjbzJfbW9sX2RheVswXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5yY28yX2VlLnJjbzJfbW9sX2RheVsxXSArIFwiIG1vbC9kYXlcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfcmNvMl9lZS5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5yY28yX2xfaHJbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5yY28yX2xfaHJbMV0gKyBcIiBML2hvdXJcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfcmNvMl9lZS5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5lZV9rY2FsX2RheVswXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LXZhbHVlXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5yY28yX2VlLmVlX2tjYWxfZGF5WzFdICsgXCIga2NhbC9kYXlcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIHJlc3VsdHNfcmNvMl9lZS5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5lZV9tal9kYXlbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC12YWx1ZVwiPnt0aGlzLnN0YXRlLnJlc3VsdHMucmNvMl9lZS5lZV9tal9kYXlbMV0gKyBcIiBNSi9kYXlcIn08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcblxuICAgICAgICAgICAgbGV0IGVycm9yX29rYXkgPSBcImVycm9yLW9rYXlcIjtcbiAgICAgICAgICAgIGxldCBvdXRzaWRlX2Vycm9yX2JhcnMgPSBcImVycm9yX25vdF9va2F5XCI7XG4gICAgICAgICAgICBsZXQgZXJyb3JfY2xhc3MgPSAoKHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLnBsYXRlYXVfMmhbMV0pIDwgMC4wNSkgPyBlcnJvcl9va2F5IDogb3V0c2lkZV9lcnJvcl9iYXJzKTtcbiAgICAgICAgICAgIHJlc3VsdHNfZXJyb3JfZmxhZ3MucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLnBsYXRlYXVfMmhbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17XCJyZXN1bHQtdmFsdWUgXCIgKyBlcnJvcl9jbGFzc30+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzJoWzFdfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgZXJyb3JfY2xhc3MgPSAoKHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLnBsYXRlYXVfMTgwWzFdKSA8IDAuMDUpID8gZXJyb3Jfb2theSA6IG91dHNpZGVfZXJyb3JfYmFycyk7XG4gICAgICAgICAgICByZXN1bHRzX2Vycm9yX2ZsYWdzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5wbGF0ZWF1XzE4MFswXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtcInJlc3VsdC12YWx1ZSBcIiArIGVycm9yX2NsYXNzfT57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLnBsYXRlYXVfMTgwWzFdfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgZXJyb3JfY2xhc3MgPSAoKHBhcnNlRmxvYXQodGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmRzX3JhdGlvWzFdKSA8IDEuMDcwICYmXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MuZHNfcmF0aW9bMV0pID4gMSkgPyBlcnJvcl9va2F5IDogb3V0c2lkZV9lcnJvcl9iYXJzKTtcbiAgICAgICAgICAgIHJlc3VsdHNfZXJyb3JfZmxhZ3MucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVzdWx0LXBhaXInPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJyZXN1bHQtbGFiZWxcIj57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmRzX3JhdGlvWzBdICsgXCI6XCJ9PC9wPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9e1wicmVzdWx0LXZhbHVlIFwiICsgZXJyb3JfY2xhc3N9Pnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MuZHNfcmF0aW9bMV19PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICBlcnJvcl9jbGFzcyA9ICgocGFyc2VGbG9hdCh0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3MuZWVbMV0pIDwgMTApID8gZXJyb3Jfb2theSA6IG91dHNpZGVfZXJyb3JfYmFycyk7XG4gICAgICAgICAgICByZXN1bHRzX2Vycm9yX2ZsYWdzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1wYWlyJz5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwicmVzdWx0LWxhYmVsXCI+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5lZVswXSArIFwiOlwifTwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtcInJlc3VsdC12YWx1ZSBcIiArIGVycm9yX2NsYXNzfT57dGhpcy5zdGF0ZS5yZXN1bHRzLmVycm9yX2ZsYWdzLmVlWzFdICsgXCIlXCJ9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgICAgICBlcnJvcl9jbGFzcyA9ICgocGFyc2VGbG9hdCh0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3Mua29fa2RbMV0pIDwgMS43ICYmXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3Mua29fa2RbMV0pID4gMS4xKSA/IGVycm9yX29rYXkgOiBvdXRzaWRlX2Vycm9yX2JhcnMpO1xuICAgICAgICAgICAgcmVzdWx0c19lcnJvcl9mbGFncy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtcGFpcic+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInJlc3VsdC1sYWJlbFwiPnt0aGlzLnN0YXRlLnJlc3VsdHMuZXJyb3JfZmxhZ3Mua29fa2RbMF0gKyBcIjpcIn08L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT17XCJyZXN1bHQtdmFsdWUgXCIgKyBlcnJvcl9jbGFzc30+e3RoaXMuc3RhdGUucmVzdWx0cy5lcnJvcl9mbGFncy5rb19rZFsxXX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+KTtcbiAgICAgICAgICAgIGxldCBjaGFydF9kYXRhX2RfbWVhcyA9IFtdO1xuICAgICAgICAgICAgbGV0IGNoYXJ0X2RhdGFfbzE4X21lYXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0ZS5kZXV0ZXJpdW1fZGVsdGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2hhcnRfZGF0YV9kX21lYXMucHVzaCh7eDogaSwgeTogdGhpcy5zdGF0ZS5kZXV0ZXJpdW1fZGVsdGFzW2ldfSk7XG4gICAgICAgICAgICAgICAgY2hhcnRfZGF0YV9vMThfbWVhcy5wdXNoKHt4OiBpLCB5OiB0aGlzLnN0YXRlLm94eWdlbl9kZWx0YXNbaV19KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2RhdGEgaXMnLCBjaGFydF9kYXRhX2RfbWVhcywgY2hhcnRfZGF0YV9vMThfbWVhcyk7XG4gICAgICAgICAgICBsZXQgZGVsdGFzX2NoYXJ0OiBKU1guRWxlbWVudCA9IChcbiAgICAgICAgICAgICAgICA8U2NhdHRlckNoYXJ0IGhlaWdodD17MzAwfSB3aWR0aD17NjAwfSBtYXJnaW49e3t0b3A6IDIwLCByaWdodDogNDAsIGJvdHRvbTogMjAsIGxlZnQ6IDQwfX0+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJ0ZXNpYW5HcmlkLz5cbiAgICAgICAgICAgICAgICAgICAgPFhBeGlzIHR5cGU9XCJudW1iZXJcIiBkYXRhS2V5PVwieFwiIG5hbWU9XCJUaW1lIG9mIENvbGxlY3Rpb25cIiBsYWJlbD1cIlRpbWUgb2YgQ29sbGVjdGlvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkb21haW49e1stMC41LCA0LjVdfSB0aWNrcz17U0FNUExFX0xBQkVMU30vPlxuICAgICAgICAgICAgICAgICAgICA8WUF4aXMgeUF4aXNJZD1cImxlZnRcIiB0eXBlPVwibnVtYmVyXCIgZGF0YUtleT1cInlcIiBuYW1lPVwiTWVhc3VyZWQgMkhcIiBsYWJlbD1cIk1lYXN1cmVkIDJIXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbj17Wy0yMDAsIDkwMF19IHVuaXQ9e3RoaXMuc3RhdGUuZGVsdGFfdW5pdHN9IHRpY2tzPXtbLTIwMCwgMCwgMjAwLCA0MDAsIDYwMCwgODAwXX0vPlxuICAgICAgICAgICAgICAgICAgICA8WUF4aXMgeUF4aXNJZD1cInJpZ2h0XCIgdHlwZT1cIm51bWJlclwiIGRhdGFLZXk9XCJ5XCIgbmFtZT1cIk1lYXN1cmVkIE8xOFwiIGxhYmVsPVwiTWVhc3VyZWQgTzE4XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbj17Wy0yMDAsIDkwMF19IHVuaXQ9e3RoaXMuc3RhdGUuZGVsdGFfdW5pdHN9IG9yaWVudGF0aW9uPVwicmlnaHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja3M9e1stMjAwLCAwLCAyMDAsIDQwMCwgNjAwLCA4MDBdfS8+XG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwIGN1cnNvcj17e3N0cm9rZURhc2hhcnJheTogJzMgMyd9fS8+XG4gICAgICAgICAgICAgICAgICAgIDxTY2F0dGVyIHlBeGlzSWQ9XCJsZWZ0XCIgbmFtZT1cIk1lYXN1cmVkIDJIXCIgZGF0YT17Y2hhcnRfZGF0YV9kX21lYXN9IGZpbGw9XCIjODg4NGQ4XCIvPlxuICAgICAgICAgICAgICAgICAgICA8U2NhdHRlciB5QXhpc0lkPVwicmlnaHRcIiBuYW1lPVwiTWVhc3VyZWQgTzE4XCIgZGF0YT17Y2hhcnRfZGF0YV9vMThfbWVhc30gZmlsbD1cIiM4MmNhOWRcIi8+XG4gICAgICAgICAgICAgICAgPC9TY2F0dGVyQ2hhcnQ+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0c19kaXNwbGF5ID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHRzLWRpc3BsYXknIHJlZj17dGhpcy5zY3JvbGxfYW5jaG9yX3JlZn0+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT0ncmVzdWx0cy1jYXJkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT57J1Jlc3VsdHMgZm9yIHN1YmplY3QgJyArIHRoaXMuc3RhdGUuc3ViamVjdF9pZH08L2gxPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9ucyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1jYWxjJz5DYWxjdWxhdGlvbnM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19jYWxjdWxhdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1jYWxjJz5yQ08yIGFuZCBFRSwgaW50ZXJjZXB0IG1ldGhvZDwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZXN1bHRzX3JjbzJfZWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc3VsdC1zZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzTmFtZT0ncmVzdWx0LWhlYWRlci1lcnJvcic+RXJyb3IgRmxhZ3M8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19lcnJvcl9mbGFnc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgICAgICAgICAgICAgIDxDYXJkIGNsYXNzTmFtZT0ncmVzdWx0cy1jYXJkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtc2VjdGlvbnMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZXN1bHQtc2VjdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkZWx0YXNfY2hhcnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9DYXJkPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxOYXZiYXIgY2xhc3NOYW1lPSdkbHctbmF2Jz5cbiAgICAgICAgICAgICAgICA8RGlhbG9nIGlzT3Blbj17dGhpcy5zdGF0ZS5pbmZvX292ZXJsYXlfb3Blbn0gY2FuRXNjYXBlS2V5Q2xvc2U9e3RydWV9IGNhbk91dHNpZGVDbGlja0Nsb3NlPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0JhY2tkcm9wPXt0cnVlfSBpc0Nsb3NlQnV0dG9uU2hvd249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5mb19vdmVybGF5X29wZW46IGZhbHNlfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17J0hvdyB0byB1c2UgdGhlIERvdWJseSBMYWJlbGVkIFdhdGVyIEFwcCd9PlxuICAgICAgICAgICAgICAgICAgICA8cD5zb21lIGhlbHBmdWwgdGV4dC0gaW5jbHVkZSBDU1YgZm9ybWF0dGluZzwvcD5cbiAgICAgICAgICAgICAgICA8L0RpYWxvZz5cbiAgICAgICAgICAgICAgICA8TmF2YmFyR3JvdXAgYWxpZ249e0FsaWdubWVudC5MRUZUfT5cbiAgICAgICAgICAgICAgICAgICAgPE5hdmJhci5IZWFkaW5nIGNsYXNzTmFtZT0nZGx3LXRpdGxlJz5Eb3VibHkgTGFiZWxlZCBXYXRlcjwvTmF2YmFyLkhlYWRpbmc+XG4gICAgICAgICAgICAgICAgPC9OYXZiYXJHcm91cD5cbiAgICAgICAgICAgICAgICA8TmF2YmFyR3JvdXAgYWxpZ249e0FsaWdubWVudC5SSUdIVH0+XG4gICAgICAgICAgICAgICAgICAgIDxOYXZiYXJIZWFkaW5nIGNsYXNzTmFtZT0ndGFnbGluZSc+YW4gb3BlbiBzb3VyY2UgcHJvamVjdDwvTmF2YmFySGVhZGluZz5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCJhc3NldHMvbG9nb19jdWhzLnBuZ1wiIGFsdD1cIlVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQW5zY2h1dHogTWVkaWNhbCBDYW1wdXMgbG9nb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3snaGVpZ2h0JzogMzB9fS8+XG4gICAgICAgICAgICAgICAgICAgIDxOYXZiYXJEaXZpZGVyLz5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbS9qY2hteXovRG91Ymx5TGFiZWxlZFdhdGVyXCIgdGFyZ2V0PVwiX2JsYW5rXCI+RG91Ymx5TGFiZWxlZFdhdGVyIG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBHaXRIdWI8L2E+XG4gICAgICAgICAgICAgICAgICAgIDxOYXZiYXJEaXZpZGVyLz5cbiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBpY29uPXtcImhlbHBcIn0gbWluaW1hbD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHtpbmZvX292ZXJsYXlfb3BlbjogdHJ1ZX0pfT5IZWxwPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgPC9OYXZiYXJHcm91cD5cbiAgICAgICAgICAgICAgICA8Rm9ybUdyb3VwIGNsYXNzTmFtZT0nZGx3LWFwcCc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdWJqZWN0LWNsZWFyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PlN1YmplY3QgSUQ8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dEdyb3VwIGxlZnRJY29uPXsodGhpcy5zdGF0ZS5zdWJqZWN0X2lkID8gXCJ0aWNrXCIgOiBcImNpcmNsZS1hcnJvdy1yaWdodFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eycuYnAzLWZpbGwgc3ViamVjdC1pZCd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT4gdGhpcy5zZXRTdGF0ZSh7c3ViamVjdF9pZDogKGV2ZW50LnRhcmdldCBhcyBhbnkpLnZhbHVlfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9J0lEJyB2YWx1ZT17dGhpcy5zdGF0ZS5zdWJqZWN0X2lkfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J2NsZWFyLWJ1dHRvbicgb25DbGljaz17dGhpcy5jbGVhcn0+Q0xFQVIgSU5QVVRTPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdsb2FkLWZyb20tY3N2Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5Mb2FkIGlucHV0IGRhdGEgZnJvbSAuY3N2IGZpbGU8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVJbnB1dCB0ZXh0PXt0aGlzLnN0YXRlLmlucHV0X2Nzdl9uYW1lIHx8IFwiQ2hvb3NlIGZpbGUuLi5cIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JbnB1dENoYW5nZT17dGhpcy5oYW5kbGVfY3N2X3VwbG9hZH0gZGlzYWJsZWQ9eyEhKHRoaXMuc3RhdGUuaW5wdXRfY3N2X25hbWUpfS8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2FtcGxlcyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGF0ZS1pbnB1dHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5Db2xsZWN0aW9uIERhdGVzIGFuZCBUaW1lczwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvbGxlY3Rpb25fdGltZV9pbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkZWx0YS1pbnB1dHMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5EZXV0ZXJpdW0gRGVsdGEgVmFsdWVzPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGV1dGVyaXVtX2RlbHRhX2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RlbHRhLWlucHV0cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1Pk94eWdlbiAxOCBEZWx0YSBWYWx1ZXM8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtveHlnZW5fZGVsdGFfaW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGVsdGEtdW5pdC1yYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJhZGlvR3JvdXAgb25DaGFuZ2U9eyhldmVudDogRm9ybUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2RlbHRhX3VuaXRzOiAoZXZlbnQudGFyZ2V0IGFzIGFueSkudmFsdWV9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IHNlbGVjdGVkVmFsdWU9e3RoaXMuc3RhdGUuZGVsdGFfdW5pdHN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmFkaW8gbGFiZWw9XCJwZXJtaWxcIiB2YWx1ZT17RGVsdGFVbml0cy5wZXJtaWx9IGxhcmdlPXt0cnVlfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSYWRpbyBsYWJlbD1cInBwbVwiIHZhbHVlPXtEZWx0YVVuaXRzLnBwbX0gbGFyZ2U9e3RydWV9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JhZGlvR3JvdXA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlbGVtZW50LXdpc2UtaW5wdXRzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtaXhlZC1kb3NlLWJveCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94IGNoZWNrZWQ9e3RoaXMuc3RhdGUubWl4ZWRfZG9zZX0gbGFiZWxFbGVtZW50PXs8aDU+TWl4ZWQgRG9zZTwvaDU+fSBsYXJnZT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe21peGVkX2Rvc2U6ICF0aGlzLnN0YXRlLm1peGVkX2Rvc2V9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fSBhbGlnbkluZGljYXRvcj17QWxpZ25tZW50LlJJR0hUfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlbGVtZW50LXdpc2UtaW5wdXRzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbnB1dHMtYnktZWxlbWVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PkRvc2UgV2VpZ2h0czwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rvc2Vfd2VpZ2h0X2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2lucHV0cy1ieS1lbGVtZW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDU+RG9zZSBFbnJpY2htZW50czwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rvc2VfZW5yaWNobWVudF9pbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdlbGVtZW50LXdpc2UtaW5wdXRzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdpbnB1dHMtYnktZWxlbWVudCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1PlN1YmplY3QgV2VpZ2h0PC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TnVtYmVySW5wdXQgcGxhY2Vob2xkZXI9e1wiSW5pdGlhbCBzdWJqZWN0IHdlaWdodCAoa2cpXCJ9IGluZGV4PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VfZnVuY3Rpb249e3RoaXMuaGFuZGxlX3N1YmplY3Rfd2VpZ2h0X2NoYW5nZX0gdW5pdD17J2tnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuc3ViamVjdF93ZWlnaHRzWzBdfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE51bWJlcklucHV0IHBsYWNlaG9sZGVyPXtcIkZpbmFsIHN1YmplY3Qgd2VpZ2h0IChrZylcIn0gaW5kZXg9ezF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZV9mdW5jdGlvbj17dGhpcy5oYW5kbGVfc3ViamVjdF93ZWlnaHRfY2hhbmdlfSB1bml0PXsna2cnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5zdWJqZWN0X3dlaWdodHNbMV19Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J2NhbGN1bGF0ZS1idXR0b24nIG9uQ2xpY2s9e3RoaXMuc3VibWl0X2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFhbGxfaW5wdXRzX3ZhbGlkYXRlZH0+Q0FMQ1VMQVRFIFJFU1VMVFM8L0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdWJtaXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Nzdi1pbnB1dC1uZXcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5JbnB1dCBhIG5hbWUgZm9yIGEgbmV3IC5jc3YgZmlsZTwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0R3JvdXAgcGxhY2Vob2xkZXI9J0NTViBmaWxlbmFtZScgY2xhc3NOYW1lPSdjc3ZfaW5wdXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV3X2Nzdl9uYW1lOiAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlfSl9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Nzdi1hcHBlbmQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNT5Pciwgc2VsZWN0IGFuIGV4aXN0aW5nIC5jc3YgZmlsZSB0byBhcHBlbmQgcmVzdWx0cyB0bzwvaDU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVJbnB1dCB0ZXh0PXt0aGlzLnN0YXRlLmFwcGVuZF9jc3ZfbmFtZSB8fCBcIkNob29zZSBmaWxlLi4uXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbklucHV0Q2hhbmdlPXt0aGlzLmhhbmRsZV9jc3ZfYXBwZW5kX2Nob2ljZX0gY2xhc3NOYW1lPSdjc3YtaW5wdXQnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLmV4cG9ydH0gZGlzYWJsZWQ9eyEodGhpcy5zdGF0ZS5yZXN1bHRzLmNhbGN1bGF0aW9ucyAmJiAodGhpcy5zdGF0ZS5uZXdfY3N2X25hbWUgfHwgdGhpcy5zdGF0ZS5hcHBlbmRfY3N2X25hbWUpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdleHBvcnQtYnV0dG9uJz5FWFBPUlQgVE8gQ1NWPC9CdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7cmVzdWx0c19kaXNwbGF5fVxuICAgICAgICAgICAgICAgIDwvRm9ybUdyb3VwPlxuICAgICAgICAgICAgPC9OYXZiYXI+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZXhwb3J0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGV4cG9ydF90b19jc3YodGhpcy5zdGF0ZS5uZXdfY3N2X25hbWUpO1xuICAgICAgICBpZiAocmVzdWx0cy5lcnJvcikge1xuICAgICAgICAgICAgQXBwVG9hc3Rlci5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJFcnJvciBleHBvcnRpbmcgcmVzdWx0cyB0byBjc3YuIFBsZWFzZSBmaWxlIGEgYnVnIHJlcG9ydCBhdCBodHRwczovL2dpdGh1Yi5jb20vamNobXl6L0RvdWJseUxhYmVsZWRXYXRlci9pc3N1ZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50OiBcImRhbmdlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBcHBUb2FzdGVyLnNob3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlJlc3VsdHMgc3VjY2Vzc2Z1bGx5IGV4cG9ydGVkIHRvIFwiICsgcmVzdWx0cy5zYXZlZF9maWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlbnQ6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAzMDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc3VibWl0X2lucHV0cyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGRhdGV0aW1lcyA9IHRoaXMuc3RhdGUuZGF0ZXRpbWVzLm1hcCgodmFsdWU6IG1vbWVudC5Nb21lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b0FycmF5KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBtb250aHMgYXJlIHplcm8taW5kZXhlZCBpbiBNb21lbnQuanNcbiAgICAgICAgZGF0ZXRpbWVzLm1hcCgodmFsdWU6IG51bWJlcltdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc3BsaWNlKDEsIDEsIHZhbHVlWzFdICsgMSk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGNhbGN1bGF0ZV9mcm9tX2lucHV0cyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkX21lYXM6IHRoaXMuc3RhdGUuZGV1dGVyaXVtX2RlbHRhcyxcbiAgICAgICAgICAgICAgICBvMThfbWVhczogdGhpcy5zdGF0ZS5veHlnZW5fZGVsdGFzLFxuICAgICAgICAgICAgICAgIGRhdGV0aW1lczogZGF0ZXRpbWVzLFxuICAgICAgICAgICAgICAgIGRvc2Vfd2VpZ2h0czogdGhpcy5zdGF0ZS5kb3NlX3dlaWdodHMsXG4gICAgICAgICAgICAgICAgZG9zZV9lbnJpY2htZW50czogdGhpcy5zdGF0ZS5kb3NlX2VucmljaG1lbnRzLFxuICAgICAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0czogdGhpcy5zdGF0ZS5zdWJqZWN0X3dlaWdodHMsXG4gICAgICAgICAgICAgICAgc3ViamVjdF9pZDogdGhpcy5zdGF0ZS5zdWJqZWN0X2lkLFxuICAgICAgICAgICAgICAgIG1peGVkX2Rvc2U6IHRoaXMuc3RhdGUubWl4ZWRfZG9zZSxcbiAgICAgICAgICAgICAgICBpbl9wZXJtaWw6ICh0aGlzLnN0YXRlLmRlbHRhX3VuaXRzID09PSBEZWx0YVVuaXRzLnBlcm1pbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc3VsdHMuY2FsY3VsYXRpb25zICYmIHJlc3VsdHMuZXJyb3JfZmxhZ3MgJiYgcmVzdWx0cy5yY28yX2VlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGlvbnM6IHJlc3VsdHMuY2FsY3VsYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjbzJfZWU6IHJlc3VsdHMucmNvMl9lZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl9mbGFnczogcmVzdWx0cy5lcnJvcl9mbGFnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUmVzdWx0cyBjYWxjdWxhdGVkIHN1Y2Nlc3NmdWxseVwiLCBpbnRlbnQ6IFwic3VjY2Vzc1wiLCB0aW1lb3V0OiAzMDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxfYW5jaG9yX3JlZi5jdXJyZW50KSB0aGlzLnNjcm9sbF9hbmNob3JfcmVmLmN1cnJlbnQuc2Nyb2xsSW50b1ZpZXcoe2JlaGF2aW9yOiBcInNtb290aFwifSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY2xlYXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dF9jc3ZfbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhczogW1wiXCIsIFwiXCIsIFwiXCIsIFwiXCIsIFwiXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBveHlnZW5fZGVsdGFzOiBbXCJcIiwgXCJcIiwgXCJcIiwgXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGV0aW1lczogW3RoaXMubm93LCB0aGlzLm5vdywgdGhpcy5ub3csIHRoaXMubm93LCB0aGlzLm5vd10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvc2Vfd2VpZ2h0czogW1wiXCIsIFwiXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzOiBbXCJcIiwgXCJcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0czogW1wiXCIsIFwiXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0X2lkOiBcIlwiLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRldXRlcml1bV9kZWx0YXNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3h5Z2VuX2RlbHRhc192YWxpZGF0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRldGltZXNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZG9zZV93ZWlnaHRzX3ZhbGlkYXRlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvc2VfZW5yaWNobWVudHNfdmFsaWRhdGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdF93ZWlnaHRzX3ZhbGlkYXRlZDogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czoge2NhbGN1bGF0aW9uczogbnVsbCwgcmNvMl9lZTogbnVsbCwgZXJyb3JfZmxhZ3M6IG51bGx9LFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBoYW5kbGVfY3N2X3VwbG9hZCA9IGFzeW5jIChldmVudDogRm9ybUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgICAgIGxldCBmaWxlID0gKGV2ZW50LnRhcmdldCBhcyBhbnkpLmZpbGVzWzBdO1xuICAgICAgICBpZiAoZmlsZS50eXBlID09PSBcInRleHQvY3N2XCIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lucHV0X2Nzdl9uYW1lOiBmaWxlLm5hbWV9KTtcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IHRoaXMuX2xvYWRfaGFuZGxlcjtcbiAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gdGhpcy5fZXJyb3JfaGFuZGxlcjtcbiAgICAgICAgICAgIGF3YWl0IHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQXBwVG9hc3Rlci5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTZWxlY3QgYSAuY3N2IGZpbGUuIEZvciBmb3JtYXR0aW5nIGhlbHAsIHByZXNzICdIZWxwJyBpbiB0aGUgdXBwZXIgcmlnaHQgaGFuZCBjb3JuZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50OiBcImRhbmdlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX2Nzdl9hcHBlbmRfY2hvaWNlID0gKGV2ZW50OiBGb3JtRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgICAgbGV0IGZpbGUgPSAoZXZlbnQudGFyZ2V0IGFzIGFueSkuZmlsZXNbMF07XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09IFwidGV4dC9jc3ZcIikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXBwZW5kX2Nzdl9uYW1lOiBmaWxlLm5hbWV9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2VsZWN0IGFuIGV4aXN0aW5nIC5jc3YgZmlsZS5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZW50OiBcImRhbmdlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICBfbG9hZF9oYW5kbGVyID0gKGV2ZW50OiBQcm9ncmVzc0V2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW50byBsb2FkIGhhbmRsZXJcIik7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgbGV0IGNzdiA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIGxldCBhbGxfdGV4dF9saW5lcyA9IGNzdi5zcGxpdCgvXFxyXFxufFxcbi8pO1xuICAgICAgICBsZXQgY29sdW1ucyA9IGFsbF90ZXh0X2xpbmVzWzBdLnNwbGl0KCcsJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb2x1bW5zJywgY29sdW1ucyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IGFsbF90ZXh0X2xpbmVzWzFdLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YSBpcycsIGRhdGEpO1xuICAgICAgICAgICAgLy9UT0RPOiBtYWtlIHRoaXMgZGVhbCB3aXRoIG90aGVyIGNzdiBvcmRlcnNcbiAgICAgICAgICAgIGxldCBkX2RlbHRhcyA9IGRhdGEuc2xpY2UoMCwgNSk7XG4gICAgICAgICAgICBsZXQgb19kZWx0YXMgPSBkYXRhLnNsaWNlKDUsIDEwKTtcbiAgICAgICAgICAgIGxldCBzYW1wbGVfdGltZXMgPSBkYXRhLnNsaWNlKDEwLCAxNSk7XG4gICAgICAgICAgICBsZXQgZG9zZV93ZWlnaHRzID0gZGF0YS5zbGljZSgxNSwgMTcpO1xuICAgICAgICAgICAgbGV0IGRvc2VfZW5yaWNobWVudHMgPSBkYXRhLnNsaWNlKDE3LCAxOSk7XG4gICAgICAgICAgICBsZXQgc3ViamVjdF93ZWlnaHRzID0gZGF0YS5zbGljZSgxOSwgMjEpO1xuICAgICAgICAgICAgbGV0IHN1YmplY3RfaWQgPSBkYXRhLnNsaWNlKDIxLCAyMik7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRfZGVsdGFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZGV1dGVyaXVtX2RlbHRhX2NoYW5nZShpLCBkX2RlbHRhc1tpXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfb3h5Z2VuX2RlbHRhX2NoYW5nZShpLCBvX2RlbHRhc1tpXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZGF0ZV9jaGFuZ2UoaSwgbW9tZW50LnV0YyhzYW1wbGVfdGltZXNbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9zZV93ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZG9zZV93ZWlnaHRfY2hhbmdlKGksIGRvc2Vfd2VpZ2h0c1tpXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZG9zZV9lbnJpY2htZW50X2NoYW5nZShpLCBkb3NlX2VucmljaG1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9zdWJqZWN0X3dlaWdodF9jaGFuZ2UoaSwgc3ViamVjdF93ZWlnaHRzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3N1YmplY3RfaWQ6IHN1YmplY3RfaWR9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5fYmFkX2Zvcm1hdChcIlwiKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfYmFkX2Zvcm1hdCA9IChzcGVjaWZpY19lcnJvcjogc3RyaW5nKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lucHV0X2Nzdl9uYW1lOiBcIlwifSk7XG4gICAgICAgIGxldCBkaXNwbGF5X21zZyA9IFwiSW5jb3JyZWN0IC5jc3YgZm9ybWF0LlwiICsgc3BlY2lmaWNfZXJyb3IgKyBcIiBTZWUgJ0hlbHAnIGZvciBleHBlY3RlZCBmb3JtYXQuXCI7XG4gICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7bWVzc2FnZTogZGlzcGxheV9tc2csIGludGVudDogXCJkYW5nZXJcIiwgdGltZW91dDogMH0pO1xuICAgIH07XG5cbiAgICBfZXJyb3JfaGFuZGxlciA9IChldmVudDogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQuZXJyb3IubmFtZSA9PSBcIk5vdFJlYWRhYmxlRXJyb3JcIikge1xuICAgICAgICAgICAgQXBwVG9hc3Rlci5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlIG5vdCByZWFkYWJsZS4gRm9yIGZvcm1hdHRpbmcgaGVscCwgcHJlc3MgJ0hlbHAnIGluIHRoZSB1cHBlciByaWdodCBoYW5kIGNvcm5lclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlbnQ6IFwiZGFuZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjaGVja19udW1lcmljYWxfaW5wdXRzID0gKGlucHV0X2FyYXk6IChzdHJpbmcgfCBudW1iZXIpW10pID0+IHtcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgb2YgaW5wdXRfYXJheSkge1xuICAgICAgICAgICAgaWYgKGlzTmFOKCt2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIF9mbGFnX25vbl9udW1lcmljYWxfaW5wdXQgPSAoKSA9PiB7XG4gICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7bWVzc2FnZTogXCJFbnRlciBhIG51bWVyaWMgdmFsdWVcIiwgaW50ZW50OiBcImRhbmdlclwiLCB0aW1lb3V0OiAzMDAwfSk7XG4gICAgfTtcblxuICAgIF9mbGFnX25vbl9kYXRlX2lucHV0ID0gKCkgPT4ge1xuICAgICAgICBBcHBUb2FzdGVyLnNob3coe21lc3NhZ2U6IFwiRW50ZXIgYSB2YWxpZCBkYXRlXCIsIGludGVudDogXCJkYW5nZXJcIiwgdGltZW91dDogMzAwMH0pO1xuICAgIH07XG5cbiAgICBoYW5kbGVfZGV1dGVyaXVtX2RlbHRhX2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCBldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PiB8IHN0cmluZykgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAodHlwZW9mIGV2ZW50ID09PSBcInN0cmluZ1wiKSA/IGV2ZW50IDogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgbGV0IHZhbHVlc19zZXBfYnlfc3BhY2VzID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YWx1ZXNfc2VwX2J5X3NwYWNlcyA9IHZhbHVlc19zZXBfYnlfc3BhY2VzLmZpbHRlcigodmFsdWU6IHN0cmluZykgPT4gdmFsdWUgIT09IFwiXCIpO1xuICAgICAgICBpZiAodmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoID09PSAxIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3X2RlbHRhcyA9IHRoaXMuc3RhdGUuZGV1dGVyaXVtX2RlbHRhcztcbiAgICAgICAgICAgICAgICBuZXdfZGVsdGFzLnNwbGljZShpbmRleCwgMSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldXRlcml1bV9kZWx0YXM6IG5ld19kZWx0YXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV1dGVyaXVtX2RlbHRhc192YWxpZGF0ZWQ6IHRoaXMuY2hlY2tfbnVtZXJpY2FsX2lucHV0cyhuZXdfZGVsdGFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgdGhpcy5fZmxhZ19ub25fbnVtZXJpY2FsX2lucHV0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlc19zZXBfYnlfc3BhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZGV1dGVyaXVtX2RlbHRhX2NoYW5nZShpbmRleCArIGksIHZhbHVlc19zZXBfYnlfc3BhY2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBoYW5kbGVfb3h5Z2VuX2RlbHRhX2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCBldmVudDogRm9ybUV2ZW50PEhUTUxFbGVtZW50PiB8IHN0cmluZykgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAodHlwZW9mIGV2ZW50ID09PSBcInN0cmluZ1wiKSA/IGV2ZW50IDogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgbGV0IHZhbHVlc19zZXBfYnlfc3BhY2VzID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YWx1ZXNfc2VwX2J5X3NwYWNlcyA9IHZhbHVlc19zZXBfYnlfc3BhY2VzLmZpbHRlcigodmFsdWU6IHN0cmluZykgPT4gdmFsdWUgIT09IFwiXCIpO1xuICAgICAgICBpZiAodmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoID09PSAxIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkgfHwgKHZhbHVlID09PSBcIlwiKSkge1xuICAgICAgICAgICAgICAgIGxldCBuZXdfZGVsdGFzID0gdGhpcy5zdGF0ZS5veHlnZW5fZGVsdGFzO1xuICAgICAgICAgICAgICAgIG5ld19kZWx0YXMuc3BsaWNlKGluZGV4LCAxLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3h5Z2VuX2RlbHRhczogbmV3X2RlbHRhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBveHlnZW5fZGVsdGFzX3ZhbGlkYXRlZDogdGhpcy5jaGVja19udW1lcmljYWxfaW5wdXRzKG5ld19kZWx0YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9mbGFnX25vbl9udW1lcmljYWxfaW5wdXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9veHlnZW5fZGVsdGFfY2hhbmdlKGluZGV4ICsgaSwgdmFsdWVzX3NlcF9ieV9zcGFjZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGhhbmRsZV9kYXRlX2NoYW5nZSA9IChpbmRleDogbnVtYmVyLCB2YWx1ZTogc3RyaW5nIHwgbW9tZW50Lk1vbWVudCkgPT4ge1xuICAgICAgICBsZXQgbmV3X2RhdGVfYXJyYXkgPSB0aGlzLnN0YXRlLmRhdGV0aW1lcztcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQgYWxsX2RhdGVzX2ZpbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGV4OyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoKG5ld19kYXRlX2FycmF5W2pdICE9IHRoaXMubm93KSAmJiB2YWx1ZS5pc0JlZm9yZShuZXdfZGF0ZV9hcnJheVtqXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgQXBwVG9hc3Rlci5zaG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkNvbGxlY3Rpb24gZGF0ZXMgbXVzdCBiZSBpbiBjaHJvbm9sb2dpY2FsIG9yZGVyLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVudDogXCJkYW5nZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZS5pc1NhbWUobmV3X2RhdGVfYXJyYXlbal0pKSB7XG4gICAgICAgICAgICAgICAgICAgIEFwcFRvYXN0ZXIuc2hvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJEdXBsaWNhdGUgY29sbGVjdGlvbiBkYXRlcyBlbnRlcmVkXCIsIGludGVudDogXCJkYW5nZXJcIiwgdGltZW91dDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdfZGF0ZV9hcnJheS5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgICAgIGZvciAobGV0IGRhdGUgb2YgbmV3X2RhdGVfYXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZSA9PT0gdGhpcy5ub3cpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxsX2RhdGVzX2ZpbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGV0aW1lczogbmV3X2RhdGVfYXJyYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRldGltZXNfdmFsaWRhdGVkOiBhbGxfZGF0ZXNfZmlsbGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHNwbGl0X3ZhbHVlcyA9IHZhbHVlLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIG5ld19kYXRlX2FycmF5LnNwbGljZShpbmRleCwgMSwgdGhpcy5ub3cpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2RhdGV0aW1lczogbmV3X2RhdGVfYXJyYXksIGRhdGV0aW1lc192YWxpZGF0ZWQ6IGZhbHNlfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgc2tpcHBlZF9pbmRpY2VzID0gMDsgLy8gdHJhY2sgaW5kaWNlcyB0byBwbGFjZSBkYXRlcyBpbiBjb3JyZWN0IGJveGVzXG4gICAgICAgICAgICAgICAgd2hpbGUgKGkgPCBzcGxpdF92YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlYWwgd2l0aCBzcGFjZXMgYmV0d2VlbiBkYXRlIGFuZCB0aW1lXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb21lbnQucGFyc2Vab25lKG5ldyBEYXRlKHNwbGl0X3ZhbHVlc1tpXSkpLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBzcGxpdF92YWx1ZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb21lbnQucGFyc2Vab25lKG5ldyBEYXRlKHNwbGl0X3ZhbHVlc1tpICsgMV0pKS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ib3RoIHZhbGlkIGRhdGVzLSBkb24ndCBuZWVkIHRvIHdvcnJ5IGFib3V0IHNwYWNlcywgdHJlYXQgdGhlbSBhcyBzZXBhcmF0ZSBkYXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXNfbW9tZW50ID0gY29udmVydF9zdHJpbmdfdG9fbW9tZW50KHNwbGl0X3ZhbHVlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXNfbW9tZW50ICE9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVfZGF0ZV9jaGFuZ2UoaW5kZXggKyBpLCBhc19tb21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBuZXh0IHZhbHVlIGlzbid0IGEgdmFsaWQgZGF0ZS0gbGlrZWx5IGEgdGltZS4gdGFjayBpdCBvbnRvIHRoZSBkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhc19tb21lbnQgPSBjb252ZXJ0X3N0cmluZ190b19tb21lbnQoc3BsaXRfdmFsdWVzW2ldLmNvbmNhdChcIiBcIiwgc3BsaXRfdmFsdWVzW2kgKyAxXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFzX21vbWVudCAhPT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlX2RhdGVfY2hhbmdlKGluZGV4ICsgaSAtIHNraXBwZWRfaW5kaWNlcywgYXNfbW9tZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwcGVkX2luZGljZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFzX21vbWVudCA9IGNvbnZlcnRfc3RyaW5nX3RvX21vbWVudChzcGxpdF92YWx1ZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXNfbW9tZW50ICE9PSBcImJvb2xlYW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9kYXRlX2NoYW5nZShpbmRleCArIGksIGFzX21vbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZsYWdfbm9uX2RhdGVfaW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBoYW5kbGVfZG9zZV93ZWlnaHRfY2hhbmdlID0gKGluZGV4OiBudW1iZXIsIGV2ZW50OiBGb3JtRXZlbnQ8SFRNTEVsZW1lbnQ+IHwgc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1peGVkX2Rvc2UpIHtcbiAgICAgICAgICAgIC8vIGlmIG1peGVkLCBzZXQgYm90aCB2YWx1ZXMgdG8gdGhpc1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVfZG9zZV93ZWlnaHRfY2hhbmdlKDEsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdmFsdWUgPSAodHlwZW9mIGV2ZW50ID09IFwic3RyaW5nXCIpID8gZXZlbnQgOiAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICBsZXQgdmFsdWVzX3NlcF9ieV9zcGFjZXMgPSB2YWx1ZS5zcGxpdChcIiBcIik7XG4gICAgICAgIHZhbHVlc19zZXBfYnlfc3BhY2VzID0gdmFsdWVzX3NlcF9ieV9zcGFjZXMuZmlsdGVyKCh2YWx1ZTogc3RyaW5nKSA9PiB2YWx1ZSAhPT0gXCJcIik7XG4gICAgICAgIGlmICh2YWx1ZXNfc2VwX2J5X3NwYWNlcy5sZW5ndGggPT09IDEgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGlmICghaXNOYU4oK3ZhbHVlKSB8fCB2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgIGxldCBuZXdfZG9zZV93ZWlnaHRzID0gdGhpcy5zdGF0ZS5kb3NlX3dlaWdodHM7XG4gICAgICAgICAgICAgICAgbmV3X2Rvc2Vfd2VpZ2h0cy5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX3dlaWdodHM6IG5ld19kb3NlX3dlaWdodHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9zZV93ZWlnaHRzX3ZhbGlkYXRlZDogdGhpcy5jaGVja19udW1lcmljYWxfaW5wdXRzKG5ld19kb3NlX3dlaWdodHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9mbGFnX25vbl9udW1lcmljYWxfaW5wdXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9kb3NlX3dlaWdodF9jaGFuZ2UoaW5kZXggKyBpLCB2YWx1ZXNfc2VwX2J5X3NwYWNlc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaGFuZGxlX2Rvc2VfZW5yaWNobWVudF9jaGFuZ2UgPSAoaW5kZXg6IG51bWJlciwgZXZlbnQ6IEZvcm1FdmVudDxIVE1MRWxlbWVudD4gfCBzdHJpbmcpID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gKHR5cGVvZiBldmVudCA9PSBcInN0cmluZ1wiKSA/IGV2ZW50IDogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgbGV0IHZhbHVlc19zZXBfYnlfc3BhY2VzID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YWx1ZXNfc2VwX2J5X3NwYWNlcyA9IHZhbHVlc19zZXBfYnlfc3BhY2VzLmZpbHRlcigodmFsdWU6IHN0cmluZykgPT4gdmFsdWUgIT09IFwiXCIpO1xuICAgICAgICBpZiAodmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoID09PSAxIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3X2VucmljaG1lbnRzID0gdGhpcy5zdGF0ZS5kb3NlX2VucmljaG1lbnRzO1xuICAgICAgICAgICAgICAgIG5ld19lbnJpY2htZW50cy5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3NlX2VucmljaG1lbnRzOiBuZXdfZW5yaWNobWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9zZV9lbnJpY2htZW50c192YWxpZGF0ZWQ6IHRoaXMuY2hlY2tfbnVtZXJpY2FsX2lucHV0cyhuZXdfZW5yaWNobWVudHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLl9mbGFnX25vbl9udW1lcmljYWxfaW5wdXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZV9kb3NlX2VucmljaG1lbnRfY2hhbmdlKGluZGV4ICsgaSwgdmFsdWVzX3NlcF9ieV9zcGFjZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGhhbmRsZV9zdWJqZWN0X3dlaWdodF9jaGFuZ2UgPSAoaW5kZXg6IG51bWJlciwgZXZlbnQ6IEZvcm1FdmVudDxIVE1MRWxlbWVudD4gfCBzdHJpbmcpID0+IHtcbiAgICAgICAgbGV0IHZhbHVlID0gKHR5cGVvZiBldmVudCA9PSBcInN0cmluZ1wiKSA/IGV2ZW50IDogKGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgbGV0IHZhbHVlc19zZXBfYnlfc3BhY2VzID0gdmFsdWUuc3BsaXQoXCIgXCIpO1xuICAgICAgICB2YWx1ZXNfc2VwX2J5X3NwYWNlcyA9IHZhbHVlc19zZXBfYnlfc3BhY2VzLmZpbHRlcigodmFsdWU6IHN0cmluZykgPT4gdmFsdWUgIT09IFwiXCIpO1xuICAgICAgICBpZiAodmFsdWVzX3NlcF9ieV9zcGFjZXMubGVuZ3RoID09PSAxIHx8IHZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKCt2YWx1ZSkgfHwgdmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3X3dlaWdodHMgPSB0aGlzLnN0YXRlLnN1YmplY3Rfd2VpZ2h0cztcbiAgICAgICAgICAgICAgICBuZXdfd2VpZ2h0cy5zcGxpY2UoaW5kZXgsIDEsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0X3dlaWdodHM6IG5ld193ZWlnaHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Rfd2VpZ2h0c192YWxpZGF0ZWQ6IHRoaXMuY2hlY2tfbnVtZXJpY2FsX2lucHV0cyhuZXdfd2VpZ2h0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHRoaXMuX2ZsYWdfbm9uX251bWVyaWNhbF9pbnB1dCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXNfc2VwX2J5X3NwYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlX3N1YmplY3Rfd2VpZ2h0X2NoYW5nZShpbmRleCArIGksIHZhbHVlc19zZXBfYnlfc3BhY2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbn1cbiJdfQ==
